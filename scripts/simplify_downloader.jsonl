{"run_id": "20260104_150836220778", "phase": "init", "status": "ok", "message": "Starting TD orders sync discovery flow", "run_env": "dev", "from_date": "2025-12-05", "to_date": "2026-01-04", "ts": "2026-01-04T15:08:36.223437+00:00"}
{"run_id": "20260104_150836220778", "phase": "init", "status": "warn", "message": "Temporarily restricting TD orders discovery to a subset of stores", "stores": ["A668", "A817"], "skipped_stores": null, "ts": "2026-01-04T15:08:36.287831+00:00"}
{"run_id": "20260104_150836220778", "phase": "init", "status": "ok", "message": "Loaded TD store rows", "store_count": 2, "stores": ["A668", "A817"], "ts": "2026-01-04T15:08:36.287939+00:00"}
{"run_id": "20260104_150836220778", "phase": "init", "status": "ok", "message": "Launching Playwright with local Chrome executable", "backend": "local_chrome", "executable_path": "/Applications/Google Chrome.app/Contents/MacOS/Google Chrome", "headless": false, "ts": "2026-01-04T15:08:37.446072+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A668", "phase": "store", "status": "ok", "message": "Starting TD orders store discovery", "run_env": "dev", "from_date": "2025-12-05", "to_date": "2026-01-04", "ts": "2026-01-04T15:08:38.190084+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A668", "phase": "session", "status": "ok", "message": "Storage state found; probing session validity", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A668_storage_state.json", "ts": "2026-01-04T15:08:39.053157+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A668", "phase": "session", "status": "warn", "message": "Probed session with existing storage state", "response_status": 200, "final_url": "https://subs.quickdrycleaning.com/Login", "contains_store_code": false, "verification_seen": false, "login_detected": true, "nav_visible": false, "home_card_visible": false, "state_valid": false, "invalid_reason": "login_form_visible", "probe_error": null, "probe_target": "https://subs.quickdrycleaning.com/a668/App/home?EventClick=True", "contains_store_path": false, "ts": "2026-01-04T15:08:44.681980+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A668", "phase": "session", "status": "ok", "message": "Storage state probe invalid; performing login", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A668_storage_state.json", "probe_reason": "login_form_visible", "probe_valid": false, "verification_seen": false, "nav_visible": false, "home_card_visible": false, "re_login_performed": true, "ts": "2026-01-04T15:08:44.682135+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A668", "phase": "login", "status": "ok", "message": "Completed login attempt", "final_url": "https://subs.quickdrycleaning.com/a668/App/home?EventClick=True", "contains_store_code": true, "post_login_wait_completed": "url_contains_store_code", "post_login_wait_error": null, "submit_error": null, "selectors": {"username": "#txtUserId", "password": "#txtPassword", "store_code": "#txtBranchPin", "submit": "#btnLogin"}, "ts": "2026-01-04T15:08:45.720640+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A668", "phase": "session", "status": "ok", "message": "Login completed; session ready", "final_url": "https://subs.quickdrycleaning.com/a668/App/home?EventClick=True", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A668_storage_state.json", "probe_reason": "login_form_visible", "probe_valid": false, "login_performed": true, "re_login_performed": true, "ts": "2026-01-04T15:08:45.720819+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A668", "phase": "session", "status": "ok", "message": "Session ready after OTP/verification wait", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A668_storage_state.json", "final_url": "https://subs.quickdrycleaning.com/a668/App/home?EventClick=True", "verification_seen": false, "login_performed": true, "ts": "2026-01-04T15:08:45.720985+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A668", "phase": "login", "status": "ok", "message": "Home page ready after login/verification", "final_url": "https://subs.quickdrycleaning.com/a668/App/home?EventClick=True", "nav_selector": "#achrOrderReport", "nav_visible": true, "home_card_visible": false, "ts": "2026-01-04T15:08:46.478451+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A668", "phase": "home", "status": "ok", "message": "Navigation controls snapshot", "links": [{"index": 0, "text": "Home    \n(Ctrl+H)", "href": "home.html?ClearContent=0-0-2026 20:38:46", "visible": true}, {"index": 1, "text": "Dashboard", "href": "Bookings_New/frmDashBoard.aspx?ClearContent=0-0-2026 20:38:46", "visible": true}, {"index": 2, "text": "Customer", "href": "New_Admin/frmNewCustomer.aspx?ClearContent=0-0-2026 20:38:46", "visible": true}, {"index": 3, "text": "Drop (F1)", "href": "", "visible": false}, {"index": 4, "text": "Reports", "href": "Reports/OrderReport.aspx?ClearContent=0-0-2026 20:38:46", "visible": true}], "ts": "2026-01-04T15:08:46.588177+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A668", "phase": "session", "status": "ok", "message": "Stored refreshed session state after home detection", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A668_storage_state.json", "verification_seen": false, "ts": "2026-01-04T15:08:46.597810+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A668", "phase": "orders", "status": "ok", "message": "Navigated to Orders container via Reports entry", "final_url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=0-0-2026%2020:38:46", "nav_selector": "#achrOrderReport", "ts": "2026-01-04T15:08:47.382067+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A668", "phase": "orders", "status": "ok", "message": "Orders container ready; iframe attached", "final_url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=0-0-2026%2020:38:46", "iframe_src": "https://reports.quickdrycleaning.com/en/order-report?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJRRENUZXN0IiwiZW1haWwiOiJRRENUZXN0VG9rZW5AdGVzdGluZy5jb20iLCJDbGllbnRJRCI6IjM2MTgxIiwiQnJhbmNoSUQiOiIxMTcwIiwiVXNlck5hbWUiOiJURHV0dGFtTmFnYXIiLCJJc0V4cG9ydFRvRXhjZWxSaWdodCI6InRydWUiLCJJc1ZpZXdNb2JpbGVOdW1iZXIiOiJ0cnVlIiwiQ3VzdG9tZXJTZWFyY2hNaW5DaGFyYWN0ZXIiOiIzIiwiSXNDdXN0b21lckFsbERhdGFFeHBvcnR0b0V4Y2VsIjoidHJ1ZSIsIklzQ3VzdG9tZXJBbGxEYXRhTW9iaWxlU2hvdyI6InRydWUiLCJPcmdhbml6YXRpb25JRCI6IjM3NTciLCJVc2VyRW1haWwiOiJzaGF3QHRoZXNoYXd2ZW50dXJlcy5jb20iLCJqdGkiOiJlODA1ODMwNS00OTI3LTQzNGEtYTExNy00MzBmMDIwMzNjYjYiLCJleHAiOjE3Njc1NDY1MjYsImlzcyI6InRlc3RxZGMiLCJhdWQiOiJxZGMtdG9rZW4ifQ.npi8q2ZidLtpDI6Y6tuu0-wo1dVwDpJm30xTvsRnRdU&source=store&oldUrl=", "iframe_attached": true, "ts": "2026-01-04T15:08:47.535582+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A668", "phase": "iframe", "status": "ok", "message": "Iframe hydration observations", "observed_controls": [{"label": "download_link", "count": 1, "texts": ["Download historical report"]}], "observed_spinners": [{"label": "kendo_loading_mask", "selector": ".k-loading-mask", "count": 0, "visible": false, "ever_visible": false, "waited_for_hidden": false}, {"label": "progress_loader", "selector": "img[alt*='loading' i]", "count": 0, "visible": false, "ever_visible": false, "waited_for_hidden": false}, {"label": "loading_text", "selector": "text=/loading/i", "count": 1, "visible": true, "ever_visible": true, "waited_for_hidden": true}], "ts": "2026-01-04T15:08:50.748249+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A668", "phase": "iframe", "status": "ok", "message": "Clicked Expand button inside iframe", "ts": "2026-01-04T15:08:50.881358+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A668", "phase": "iframe", "status": "ok", "message": "Date range set via date-range control", "from_value": "2025-12-05", "to_value": "2026-01-04", "numeric_input_count": 6, "used_numeric_triplets": true, "range_text": "Dec 5, 2025 - Jan 4, 2026", "update_click": {"found": true, "clicked": true}, "attempt": 1, "ts": "2026-01-04T15:08:53.058229+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A668", "phase": "iframe", "status": "ok", "message": "Report modal closed after request", "waited_ms": 375, "ts": "2026-01-04T15:08:53.528152+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A668", "phase": "iframe", "status": "ok", "message": "Iframe body log executed", "label": "iframe_body_after_modal_close", "body_log_attempted": true, "body_html_captured": false, "body_html_length": null, "ts": "2026-01-04T15:08:53.528277+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A668", "phase": "iframe", "status": "ok", "message": "Report Requests container located", "container_locator_strategy": "heading_preferred_wrapper", "ts": "2026-01-04T15:08:53.612167+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A668", "phase": "iframe", "status": "ok", "message": "Using TD orders locator strategies", "container_locator_strategy": "heading_preferred_wrapper", "range_match_strategy": "date_range_text_pattern", "download_locator_strategy": "href_contains_order_reports", "ts": "2026-01-04T15:08:53.612279+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A668", "phase": "iframe", "status": "ok", "message": "Observed Report Requests rows", "rows": ["S. No. Date Range Requested Status", "1 05 Dec 2025 - 04 Jan 2026 04 Jan 2026 08:38 PM Pending, Estimated Time 0m 45s", "2 05 Dec 2025 - 04 Jan 2026 04 Jan 2026 05:58 PM Download", "3 05 Dec 2025 - 04 Jan 2026 04 Jan 2026 05:35 PM Download", "4 05 Dec 2025 - 04 Jan 2026 04 Jan 2026 01:03 PM Download", "5 05 Dec 2025 - 04 Jan 2026 04 Jan 2026 10:44 AM Download", "6 04 Dec 2025 - 03 Jan 2026 03 Jan 2026 10:34 PM Download", "7 04 Dec 2025 - 03 Jan 2026 03 Jan 2026 09:30 PM Download", "8 04 Dec 2025 - 03 Jan 2026 03 Jan 2026 09:10 PM Download", "9 04 Dec 2025 - 03 Jan 2026 03 Jan 2026 08:44 PM Download"], "container_locator_strategy": "heading_preferred_wrapper", "ts": "2026-01-04T15:08:54.654139+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A668", "phase": "iframe", "status": "ok", "message": "Captured Report Requests container structure", "label": "report_requests_after_request", "row_count": 57, "container_locator_strategy": "heading_preferred_wrapper", "ts": "2026-01-04T15:08:55.600253+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A668", "phase": "iframe", "status": "ok", "message": "Selected Report Requests row for follow-up", "matched_range_text": "05 Dec 2025 - 04 Jan 2026", "status_text": "1 05 Dec 2025 - 04 Jan 2026 04 Jan 2026 08:38 PM Download", "expected_range_texts": ["Dec 5, 2025 - Jan 4, 2026", "05 Dec 2025 - 04 Jan 2026", "Dec 05, 2025 - Jan 04, 2026", "Dec 05 2025 - Jan 04 2026", "05 Dec 2025 - 4 Jan 2026", "Dec 05, 2025 - Jan 4, 2026", "Dec 05 2025 - Jan 4 2026", "5 Dec 2025 - 04 Jan 2026", "Dec 5, 2025 - Jan 04, 2026", "Dec 5 2025 - Jan 04 2026", "5 Dec 2025 - 4 Jan 2026", "Dec 5 2025 - Jan 4 2026"], "all_row_texts": ["05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026"], "range_match_strategy": "date_range_text_pattern", "download_locator_strategy": "href_contains_order_reports", "container_locator_strategy": "heading_preferred_wrapper", "selected_row_state": "downloadable", "selection_source": "downloadable_row", "ts": "2026-01-04T15:10:27.481733+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A668", "phase": "iframe", "status": "ok", "message": "Report Requests row ready for download", "matched_range_text": "05 Dec 2025 - 04 Jan 2026", "status_text": "1 05 Dec 2025 - 04 Jan 2026 04 Jan 2026 08:38 PM Download", "expected_range_texts": ["Dec 5, 2025 - Jan 4, 2026", "05 Dec 2025 - 04 Jan 2026", "Dec 05, 2025 - Jan 04, 2026", "Dec 05 2025 - Jan 04 2026", "05 Dec 2025 - 4 Jan 2026", "Dec 05, 2025 - Jan 4, 2026", "Dec 05 2025 - Jan 4 2026", "5 Dec 2025 - 04 Jan 2026", "Dec 5, 2025 - Jan 04, 2026", "Dec 5 2025 - Jan 04 2026", "5 Dec 2025 - 4 Jan 2026", "Dec 5 2025 - Jan 4 2026"], "all_row_texts": ["05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026"], "download_control_visible": true, "matched_row_text_full": "05 Dec 2025 - 04 Jan 2026", "range_match_strategy": "date_range_text_pattern", "download_locator_strategy": "href_contains_order_reports", "container_locator_strategy": "heading_preferred_wrapper", "selected_row_state": "downloadable", "selection_source": "downloadable_row", "ts": "2026-01-04T15:10:27.482931+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A668", "phase": "iframe", "status": "ok", "message": "Orders report download saved", "download_path": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/data/A668_td_orders_20251205_20260104.xlsx", "suggested_filename": "1170-vNASJWtDc_EPNbdOjSPHR.xlsx", "matched_range_text": "05 Dec 2025 - 04 Jan 2026", "expected_range_texts": ["Dec 5, 2025 - Jan 4, 2026", "05 Dec 2025 - 04 Jan 2026", "Dec 05, 2025 - Jan 04, 2026", "Dec 05 2025 - Jan 04 2026", "05 Dec 2025 - 4 Jan 2026", "Dec 05, 2025 - Jan 4, 2026", "Dec 05 2025 - Jan 4 2026", "5 Dec 2025 - 04 Jan 2026", "Dec 5, 2025 - Jan 04, 2026", "Dec 5 2025 - Jan 04 2026", "5 Dec 2025 - 4 Jan 2026", "Dec 5 2025 - Jan 4 2026"], "download_locator_strategy": "href_contains_order_reports", "range_match_strategy": "date_range_text_pattern", "container_locator_strategy": "heading_preferred_wrapper", "selected_row_state": "downloadable", "selection_source": "downloadable_row", "ts": "2026-01-04T15:10:27.913263+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A668", "phase": "ingest", "status": "warn", "message": "TD Orders workbook ingested with warnings", "warnings": ["Invalid phone number dropped: A668--7051"], "staging_rows": 255, "final_rows": 255, "ts": "2026-01-04T15:10:30.340872+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A668", "phase": "iframe", "status": "ok", "message": "Orders iframe flow completed", "download_path": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/data/A668_td_orders_20251205_20260104.xlsx", "ts": "2026-01-04T15:10:30.341005+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A668", "phase": "store", "status": "ok", "message": "Completed TD orders store discovery", "session_reused": true, "ts": "2026-01-04T15:10:30.341076+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A817", "phase": "store", "status": "ok", "message": "Starting TD orders store discovery", "run_env": "dev", "from_date": "2025-12-05", "to_date": "2026-01-04", "ts": "2026-01-04T15:10:30.408803+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A817", "phase": "session", "status": "ok", "message": "Storage state found; probing session validity", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A817_storage_state.json", "ts": "2026-01-04T15:10:30.949184+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A817", "phase": "session", "status": "warn", "message": "Probed session with existing storage state", "response_status": 200, "final_url": "https://subs.quickdrycleaning.com/Login", "contains_store_code": false, "verification_seen": false, "login_detected": true, "nav_visible": false, "home_card_visible": false, "state_valid": false, "invalid_reason": "login_form_visible", "probe_error": null, "probe_target": "https://subs.quickdrycleaning.com/a817/App/home?EventClick=True", "contains_store_path": false, "ts": "2026-01-04T15:10:36.563377+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A817", "phase": "session", "status": "ok", "message": "Storage state probe invalid; performing login", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A817_storage_state.json", "probe_reason": "login_form_visible", "probe_valid": false, "verification_seen": false, "nav_visible": false, "home_card_visible": false, "re_login_performed": true, "ts": "2026-01-04T15:10:36.563569+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A817", "phase": "login", "status": "ok", "message": "Completed login attempt", "final_url": "https://subs.quickdrycleaning.com/a817/App/home?EventClick=True", "contains_store_code": true, "post_login_wait_completed": "url_contains_store_code", "post_login_wait_error": null, "submit_error": null, "selectors": {"username": "#txtUserId", "password": "#txtPassword", "store_code": "#txtBranchPin", "submit": "#btnLogin"}, "ts": "2026-01-04T15:10:37.535098+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A817", "phase": "session", "status": "ok", "message": "Login completed; session ready", "final_url": "https://subs.quickdrycleaning.com/a817/App/home?EventClick=True", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A817_storage_state.json", "probe_reason": "login_form_visible", "probe_valid": false, "login_performed": true, "re_login_performed": true, "ts": "2026-01-04T15:10:37.535239+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A817", "phase": "session", "status": "ok", "message": "Session ready after OTP/verification wait", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A817_storage_state.json", "final_url": "https://subs.quickdrycleaning.com/a817/App/home?EventClick=True", "verification_seen": false, "login_performed": true, "ts": "2026-01-04T15:10:37.535331+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A817", "phase": "login", "status": "ok", "message": "Home page ready after login/verification", "final_url": "https://subs.quickdrycleaning.com/a817/App/home?EventClick=True", "nav_selector": "#achrOrderReport", "nav_visible": true, "home_card_visible": false, "ts": "2026-01-04T15:10:38.306783+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A817", "phase": "home", "status": "ok", "message": "Navigation controls snapshot", "links": [{"index": 0, "text": "Home    \n(Ctrl+H)", "href": "home.html?ClearContent=0-0-2026 20:40:38", "visible": true}, {"index": 1, "text": "Dashboard", "href": "Bookings_New/frmDashBoard.aspx?ClearContent=0-0-2026 20:40:38", "visible": false}, {"index": 2, "text": "Customer", "href": "New_Admin/frmNewCustomer.aspx?ClearContent=0-0-2026 20:40:38", "visible": true}, {"index": 3, "text": "Drop (F1)", "href": "", "visible": false}, {"index": 4, "text": "Reports", "href": "Reports/OrderReport.aspx?ClearContent=0-0-2026 20:40:38", "visible": true}], "ts": "2026-01-04T15:10:38.413862+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A817", "phase": "session", "status": "ok", "message": "Stored refreshed session state after home detection", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A817_storage_state.json", "verification_seen": false, "ts": "2026-01-04T15:10:38.422591+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A817", "phase": "session", "status": "ok", "message": "Persisted storage state for A817 after home detection", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A817_storage_state.json", "session_reused": true, "refreshed": true, "ts": "2026-01-04T15:10:38.422667+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A817", "phase": "orders", "status": "ok", "message": "Navigated to Orders container via Reports entry", "final_url": "https://subs.quickdrycleaning.com/a817/App/Reports/OrderReport?ClearContent=0-0-2026%2020:40:38", "nav_selector": "#achrOrderReport", "ts": "2026-01-04T15:10:39.111767+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A817", "phase": "orders", "status": "ok", "message": "Orders container ready; iframe attached", "final_url": "https://subs.quickdrycleaning.com/a817/App/Reports/OrderReport?ClearContent=0-0-2026%2020:40:38", "iframe_src": "https://reports.quickdrycleaning.com/en/order-report?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJRRENUZXN0IiwiZW1haWwiOiJRRENUZXN0VG9rZW5AdGVzdGluZy5jb20iLCJDbGllbnRJRCI6IjM2MzkxIiwiQnJhbmNoSUQiOiIxMjQ3IiwiVXNlck5hbWUiOiJUREtpcnRpTmFnYXIiLCJJc0V4cG9ydFRvRXhjZWxSaWdodCI6InRydWUiLCJJc1ZpZXdNb2JpbGVOdW1iZXIiOiJ0cnVlIiwiQ3VzdG9tZXJTZWFyY2hNaW5DaGFyYWN0ZXIiOiIzIiwiSXNDdXN0b21lckFsbERhdGFFeHBvcnR0b0V4Y2VsIjoidHJ1ZSIsIklzQ3VzdG9tZXJBbGxEYXRhTW9iaWxlU2hvdyI6InRydWUiLCJPcmdhbml6YXRpb25JRCI6IjM3NTciLCJVc2VyRW1haWwiOiJzaGF3QHRoZXNoYXd2ZW50dXJlcy5jb20iLCJqdGkiOiJiNDg4ODg1Ny02NWFmLTQxM2YtYmI4Mi0zMmI5OTI1MzU3ZjEiLCJleHAiOjE3Njc1NDY2MzgsImlzcyI6InRlc3RxZGMiLCJhdWQiOiJxZGMtdG9rZW4ifQ.Qk7DxaGZ8Bds7sUBPRoZ5YZjshb5Jdys-yx7A368AFs&source=store&oldUrl=", "iframe_attached": true, "ts": "2026-01-04T15:10:39.255155+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A817", "phase": "iframe", "status": "ok", "message": "Iframe hydration observations", "observed_controls": [{"label": "download_link", "count": 1, "texts": ["Download historical report"]}], "observed_spinners": [{"label": "kendo_loading_mask", "selector": ".k-loading-mask", "count": 0, "visible": false, "ever_visible": false, "waited_for_hidden": false}, {"label": "progress_loader", "selector": "img[alt*='loading' i]", "count": 0, "visible": false, "ever_visible": false, "waited_for_hidden": false}, {"label": "loading_text", "selector": "text=/loading/i", "count": 1, "visible": true, "ever_visible": true, "waited_for_hidden": true}], "ts": "2026-01-04T15:10:42.917081+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A817", "phase": "iframe", "status": "ok", "message": "Clicked Expand button inside iframe", "ts": "2026-01-04T15:10:43.085024+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A817", "phase": "iframe", "status": "ok", "message": "Date range set via date-range control", "from_value": "2025-12-05", "to_value": "2026-01-04", "numeric_input_count": 6, "used_numeric_triplets": true, "range_text": "Dec 5, 2025 - Jan 4, 2026", "update_click": {"found": true, "clicked": true}, "attempt": 1, "ts": "2026-01-04T15:10:45.330091+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A817", "phase": "iframe", "status": "ok", "message": "Report modal closed after request", "waited_ms": 375, "ts": "2026-01-04T15:10:45.795636+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A817", "phase": "iframe", "status": "ok", "message": "Iframe body log executed", "label": "iframe_body_after_modal_close", "body_log_attempted": true, "body_html_captured": false, "body_html_length": null, "ts": "2026-01-04T15:10:45.795726+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A817", "phase": "iframe", "status": "ok", "message": "Report Requests container located", "container_locator_strategy": "heading_preferred_wrapper", "ts": "2026-01-04T15:10:45.877468+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A817", "phase": "iframe", "status": "ok", "message": "Using TD orders locator strategies", "container_locator_strategy": "heading_preferred_wrapper", "range_match_strategy": "date_range_text_pattern", "download_locator_strategy": "href_contains_order_reports", "ts": "2026-01-04T15:10:45.877577+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A817", "phase": "iframe", "status": "ok", "message": "Observed Report Requests rows", "rows": ["S. No. Date Range Requested Status", "1 05 Dec 2025 - 04 Jan 2026 04 Jan 2026 08:40 PM Pending, Estimated Time 0m 45s", "2 05 Dec 2025 - 04 Jan 2026 04 Jan 2026 06:00 PM Download", "3 05 Dec 2025 - 04 Jan 2026 04 Jan 2026 05:37 PM Download", "4 05 Dec 2025 - 04 Jan 2026 04 Jan 2026 01:05 PM Download", "5 05 Dec 2025 - 04 Jan 2026 04 Jan 2026 10:46 AM Download", "6 04 Dec 2025 - 03 Jan 2026 03 Jan 2026 10:36 PM Download", "7 04 Dec 2025 - 03 Jan 2026 03 Jan 2026 09:32 PM Download", "8 04 Dec 2025 - 03 Jan 2026 03 Jan 2026 09:12 PM Download", "9 04 Dec 2025 - 03 Jan 2026 03 Jan 2026 08:45 PM Download"], "container_locator_strategy": "heading_preferred_wrapper", "ts": "2026-01-04T15:10:46.848389+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A817", "phase": "iframe", "status": "ok", "message": "Captured Report Requests container structure", "label": "report_requests_after_request", "row_count": 57, "container_locator_strategy": "heading_preferred_wrapper", "ts": "2026-01-04T15:10:47.824241+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A817", "phase": "iframe", "status": "ok", "message": "Selected Report Requests row for follow-up", "matched_range_text": "05 Dec 2025 - 04 Jan 2026", "status_text": "1 05 Dec 2025 - 04 Jan 2026 04 Jan 2026 08:40 PM Download", "expected_range_texts": ["Dec 5, 2025 - Jan 4, 2026", "05 Dec 2025 - 04 Jan 2026", "Dec 05, 2025 - Jan 04, 2026", "Dec 05 2025 - Jan 04 2026", "05 Dec 2025 - 4 Jan 2026", "Dec 05, 2025 - Jan 4, 2026", "Dec 05 2025 - Jan 4 2026", "5 Dec 2025 - 04 Jan 2026", "Dec 5, 2025 - Jan 04, 2026", "Dec 5 2025 - Jan 04 2026", "5 Dec 2025 - 4 Jan 2026", "Dec 5 2025 - Jan 4 2026"], "all_row_texts": ["05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026"], "range_match_strategy": "date_range_text_pattern", "download_locator_strategy": "href_contains_order_reports", "container_locator_strategy": "heading_preferred_wrapper", "selected_row_state": "downloadable", "selection_source": "downloadable_row", "ts": "2026-01-04T15:12:19.745024+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A817", "phase": "iframe", "status": "ok", "message": "Report Requests row ready for download", "matched_range_text": "05 Dec 2025 - 04 Jan 2026", "status_text": "1 05 Dec 2025 - 04 Jan 2026 04 Jan 2026 08:40 PM Download", "expected_range_texts": ["Dec 5, 2025 - Jan 4, 2026", "05 Dec 2025 - 04 Jan 2026", "Dec 05, 2025 - Jan 04, 2026", "Dec 05 2025 - Jan 04 2026", "05 Dec 2025 - 4 Jan 2026", "Dec 05, 2025 - Jan 4, 2026", "Dec 05 2025 - Jan 4 2026", "5 Dec 2025 - 04 Jan 2026", "Dec 5, 2025 - Jan 04, 2026", "Dec 5 2025 - Jan 04 2026", "5 Dec 2025 - 4 Jan 2026", "Dec 5 2025 - Jan 4 2026"], "all_row_texts": ["05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "05 Dec 2025 - 04 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "04 Dec 2025 - 03 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026", "03 Dec 2025 - 02 Jan 2026"], "download_control_visible": true, "matched_row_text_full": "05 Dec 2025 - 04 Jan 2026", "range_match_strategy": "date_range_text_pattern", "download_locator_strategy": "href_contains_order_reports", "container_locator_strategy": "heading_preferred_wrapper", "selected_row_state": "downloadable", "selection_source": "downloadable_row", "ts": "2026-01-04T15:12:19.745432+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A817", "phase": "iframe", "status": "ok", "message": "Orders report download saved", "download_path": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/data/A817_td_orders_20251205_20260104.xlsx", "suggested_filename": "1247-glXTIOw0WV5cfuuBuUwIE.xlsx", "matched_range_text": "05 Dec 2025 - 04 Jan 2026", "expected_range_texts": ["Dec 5, 2025 - Jan 4, 2026", "05 Dec 2025 - 04 Jan 2026", "Dec 05, 2025 - Jan 04, 2026", "Dec 05 2025 - Jan 04 2026", "05 Dec 2025 - 4 Jan 2026", "Dec 05, 2025 - Jan 4, 2026", "Dec 05 2025 - Jan 4 2026", "5 Dec 2025 - 04 Jan 2026", "Dec 5, 2025 - Jan 04, 2026", "Dec 5 2025 - Jan 04 2026", "5 Dec 2025 - 4 Jan 2026", "Dec 5 2025 - Jan 4 2026"], "download_locator_strategy": "href_contains_order_reports", "range_match_strategy": "date_range_text_pattern", "container_locator_strategy": "heading_preferred_wrapper", "selected_row_state": "downloadable", "selection_source": "downloadable_row", "ts": "2026-01-04T15:12:20.195454+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A817", "phase": "ingest", "status": "warn", "message": "TD Orders workbook ingested with warnings", "warnings": ["Invalid phone number dropped: A817--7461", "Invalid phone number dropped: 18409065"], "staging_rows": 251, "final_rows": 251, "ts": "2026-01-04T15:12:22.279634+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A817", "phase": "iframe", "status": "ok", "message": "Orders iframe flow completed", "download_path": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/data/A817_td_orders_20251205_20260104.xlsx", "ts": "2026-01-04T15:12:22.279769+00:00"}
{"run_id": "20260104_150836220778", "store_code": "A817", "phase": "store", "status": "ok", "message": "Completed TD orders store discovery", "session_reused": true, "ts": "2026-01-04T15:12:22.279845+00:00"}
{"run_id": "20260104_150836220778", "phase": "notifications", "status": "ok", "message": "TD orders sync discovery flow complete; notifying", "run_env": "dev", "ts": "2026-01-04T15:12:22.691910+00:00"}
{"run_id": "20260104_150836220778", "phase": "run_summary", "status": "ok", "message": "Run summary inserted", "overall_status": "warning", "ts": "2026-01-04T15:12:22.800812+00:00"}
