{"run_id": "20260105_115722688123", "phase": "init", "status": "ok", "message": "Starting TD orders sync discovery flow", "run_env": "dev", "from_date": "2025-12-06", "to_date": "2026-01-05", "ts": "2026-01-05T11:57:22.690999+00:00"}
{"run_id": "20260105_115722688123", "phase": "init", "status": "warn", "message": "Temporarily restricting TD orders discovery to a subset of stores", "stores": ["A668", "A817"], "skipped_stores": null, "ts": "2026-01-05T11:57:22.793401+00:00"}
{"run_id": "20260105_115722688123", "phase": "init", "status": "ok", "message": "Loaded TD store rows", "store_count": 2, "stores": ["A668", "A817"], "ts": "2026-01-05T11:57:22.793539+00:00"}
{"run_id": "20260105_115722688123", "phase": "init", "status": "ok", "message": "Launching Playwright with local Chrome executable", "backend": "local_chrome", "executable_path": "/Applications/Google Chrome.app/Contents/MacOS/Google Chrome", "headless": false, "ts": "2026-01-05T11:57:23.826823+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "store", "status": "ok", "message": "Starting TD orders store discovery", "run_env": "dev", "from_date": "2025-12-06", "to_date": "2026-01-05", "ts": "2026-01-05T11:57:24.789363+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "session", "status": "ok", "message": "Storage state found; probing session validity", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A668_storage_state.json", "ts": "2026-01-05T11:57:25.643817+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "session", "status": "warn", "message": "Probed session with existing storage state", "response_status": 200, "final_url": "https://subs.quickdrycleaning.com/Login", "contains_store_code": false, "verification_seen": false, "login_detected": true, "nav_visible": false, "home_card_visible": false, "state_valid": false, "invalid_reason": "login_form_visible", "probe_error": null, "probe_target": "https://subs.quickdrycleaning.com/a668/App/home?EventClick=True", "contains_store_path": false, "ts": "2026-01-05T11:57:31.400672+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "session", "status": "ok", "message": "Storage state probe invalid; performing login", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A668_storage_state.json", "probe_reason": "login_form_visible", "probe_valid": false, "verification_seen": false, "nav_visible": false, "home_card_visible": false, "re_login_performed": true, "ts": "2026-01-05T11:57:31.400865+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "login", "status": "ok", "message": "Completed login attempt", "final_url": "https://subs.quickdrycleaning.com/a668/App/home?EventClick=True", "contains_store_code": true, "post_login_wait_completed": "url_contains_store_code", "post_login_wait_error": null, "submit_error": null, "selectors": {"username": "#txtUserId", "password": "#txtPassword", "store_code": "#txtBranchPin", "submit": "#btnLogin"}, "ts": "2026-01-05T11:57:32.724775+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "session", "status": "ok", "message": "Login completed; session ready", "final_url": "https://subs.quickdrycleaning.com/a668/App/home?EventClick=True", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A668_storage_state.json", "probe_reason": "login_form_visible", "probe_valid": false, "login_performed": true, "re_login_performed": true, "ts": "2026-01-05T11:57:32.724979+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "session", "status": "ok", "message": "Session ready after OTP/verification wait", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A668_storage_state.json", "final_url": "https://subs.quickdrycleaning.com/a668/App/home?EventClick=True", "verification_seen": false, "login_performed": true, "ts": "2026-01-05T11:57:32.725207+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "login", "status": "ok", "message": "Home page ready after login/verification", "final_url": "https://subs.quickdrycleaning.com/a668/App/home?EventClick=True", "nav_selector": "#achrOrderReport", "nav_visible": true, "home_card_visible": false, "ts": "2026-01-05T11:57:34.673601+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "home", "status": "ok", "message": "Navigation controls snapshot", "links": [{"index": 0, "text": "Home    \n(Ctrl+H)", "href": "home.html?ClearContent=1-0-2026 17:27:34", "visible": true}, {"index": 1, "text": "Dashboard", "href": "Bookings_New/frmDashBoard.aspx?ClearContent=1-0-2026 17:27:34", "visible": false}, {"index": 2, "text": "Customer", "href": "New_Admin/frmNewCustomer.aspx?ClearContent=1-0-2026 17:27:34", "visible": true}, {"index": 3, "text": "Drop (F1)", "href": "", "visible": false}, {"index": 4, "text": "Reports", "href": "Reports/OrderReport.aspx?ClearContent=1-0-2026 17:27:34", "visible": true}], "ts": "2026-01-05T11:57:34.764524+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "session", "status": "ok", "message": "Stored refreshed session state after home detection", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A668_storage_state.json", "verification_seen": false, "ts": "2026-01-05T11:57:34.774229+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "orders", "status": "ok", "message": "Skipping Orders iframe flow because Orders segment was disabled by flag", "ts": "2026-01-05T11:57:34.774308+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "sales", "status": "ok", "message": "Starting Sales navigation via direct URL", "navigation_method": "direct", "navigation_path": "direct_url", "target_url": "https://subs.quickdrycleaning.com/a668/App/Reports/NEWSalesAndDeliveryReport", "ts": "2026-01-05T11:57:34.774609+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "sales", "status": "ok", "message": "Waiting for Sales URL match after direct navigation", "navigation_method": "direct", "navigation_path": "direct_url", "target_pattern": "/A668/App/Reports/NEWSalesAndDeliveryReport", "target_url": "https://subs.quickdrycleaning.com/a668/App/Reports/NEWSalesAndDeliveryReport", "ts": "2026-01-05T11:57:34.908246+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "sales", "status": "warn", "message": "Sales destination validation failed after direct navigation", "navigation_method": "direct", "navigation_path": "direct_url", "final_url": "https://subs.quickdrycleaning.com/Login", "target_url": "https://subs.quickdrycleaning.com/a668/App/Reports/NEWSalesAndDeliveryReport", "contains_store_code": false, "contains_sales_path": false, "is_login_url": true, "ts": "2026-01-05T11:59:04.939621+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "sales", "status": "ok", "message": "Sales navigation attempt", "navigation_method": "direct", "navigation_path": "direct_url", "attempt": "initial", "retry_status": "initial", "success": false, "final_url": "https://subs.quickdrycleaning.com/Login", "target_url": "https://subs.quickdrycleaning.com/a668/App/Reports/NEWSalesAndDeliveryReport", "nav_selector": "#achrOrderReport", "sales_link_selector": "a[href*='NEWSalesAndDeliveryReport'], a[href*='SalesAndDeliveryReport']", "reason": "login_redirect", "url_transitions": [{"label": "start", "url": "https://subs.quickdrycleaning.com/a668/App/home?EventClick=True"}, {"label": "after_direct_goto", "url": "https://subs.quickdrycleaning.com/Login"}, {"label": "after_direct_wait", "url": "https://subs.quickdrycleaning.com/Login"}], "ts": "2026-01-05T11:59:04.939775+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "login", "status": "ok", "message": "Completed login attempt", "final_url": "https://subs.quickdrycleaning.com/a668/App/home?EventClick=True", "contains_store_code": true, "post_login_wait_completed": "url_contains_store_code", "post_login_wait_error": null, "submit_error": null, "selectors": {"username": "#txtUserId", "password": "#txtPassword", "store_code": "#txtBranchPin", "submit": "#btnLogin"}, "ts": "2026-01-05T11:59:05.812502+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "login", "status": "ok", "message": "Home page ready after login/verification", "final_url": "https://subs.quickdrycleaning.com/a668/App/home?EventClick=True", "nav_selector": "#achrOrderReport", "nav_visible": true, "home_card_visible": false, "ts": "2026-01-05T11:59:07.241377+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "sales", "status": "ok", "message": "Refreshed storage state after Sales re-login", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A668_storage_state.json", "final_url": "https://subs.quickdrycleaning.com/a668/App/home?EventClick=True", "ts": "2026-01-05T11:59:07.256983+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "sales", "status": "ok", "message": "Retrying Sales navigation via Reports after login redirect or validation failure using authenticated path", "retry_status": "after_login", "target_url": "https://subs.quickdrycleaning.com/a668/App/Reports/NEWSalesAndDeliveryReport", "last_reason": "login_redirect", "navigation_path": "home_reports_sales", "ts": "2026-01-05T11:59:07.257145+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "sales", "status": "ok", "message": "Navigating to Sales via home → reports → sales path", "navigation_method": "reports_nav_after_login", "navigation_path": "home_reports_sales", "nav_selector": "#achrOrderReport", "sales_link_selector": "a[href*='NEWSalesAndDeliveryReport'], a[href*='SalesAndDeliveryReport']", "retry_status": "after_login", "home_url": "https://subs.quickdrycleaning.com/a668/App/home", "ts": "2026-01-05T11:59:07.257238+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "login", "status": "ok", "message": "Home page ready after login/verification", "final_url": "https://subs.quickdrycleaning.com/a668/App/home?EventClick=True", "nav_selector": "#achrOrderReport", "nav_visible": true, "home_card_visible": false, "ts": "2026-01-05T11:59:07.269154+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "sales", "status": "ok", "message": "Starting Sales navigation via Reports", "navigation_method": "reports_nav_after_login", "navigation_path": "home_reports_sales", "nav_selector": "#achrOrderReport", "sales_link_selector": "a[href*='NEWSalesAndDeliveryReport'], a[href*='SalesAndDeliveryReport']", "retry_status": "after_login", "ts": "2026-01-05T11:59:07.269298+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "sales", "status": "ok", "message": "Waiting for Reports navigation selector", "navigation_method": "reports_nav_after_login", "navigation_path": "home_reports_sales", "nav_selector": "#achrOrderReport", "retry_status": "after_login", "ts": "2026-01-05T11:59:07.269421+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "sales", "status": "ok", "message": "Reports navigation selector available", "navigation_method": "reports_nav_after_login", "navigation_path": "home_reports_sales", "nav_selector": "#achrOrderReport", "retry_status": "after_login", "ts": "2026-01-05T11:59:07.278053+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "sales", "status": "ok", "message": "Clicking Reports navigation selector", "navigation_method": "reports_nav_after_login", "navigation_path": "home_reports_sales", "nav_selector": "#achrOrderReport", "retry_status": "after_login", "ts": "2026-01-05T11:59:07.278162+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "sales", "status": "ok", "message": "Clicked Reports navigation selector", "navigation_method": "reports_nav_after_login", "navigation_path": "home_reports_sales", "nav_selector": "#achrOrderReport", "retry_status": "after_login", "url_after_reports_click": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2017:29:7", "ts": "2026-01-05T11:59:07.767756+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "sales", "status": "ok", "message": "Waiting for Sales link selector", "navigation_method": "reports_nav_after_login", "navigation_path": "home_reports_sales", "sales_link_selector": "a[href*='NEWSalesAndDeliveryReport'], a[href*='SalesAndDeliveryReport']", "retry_status": "after_login", "ts": "2026-01-05T11:59:07.767925+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "sales", "status": "ok", "message": "Sales navigation attempt", "navigation_method": "reports_nav", "navigation_path": "home_reports_sales", "attempt": "after_login", "retry_status": "after_login", "success": false, "final_url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2017:29:7", "target_url": "https://subs.quickdrycleaning.com/a668/App/Reports/NEWSalesAndDeliveryReport", "nav_selector": "#achrOrderReport", "sales_link_selector": "a[href*='NEWSalesAndDeliveryReport'], a[href*='SalesAndDeliveryReport']", "reason": "sales_link_missing", "url_transitions": [{"label": "start", "url": "https://subs.quickdrycleaning.com/a668/App/home?EventClick=True"}, {"label": "home_ready", "url": "https://subs.quickdrycleaning.com/a668/App/home?EventClick=True"}, {"label": "after_reports_click", "url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2017:29:7"}], "ts": "2026-01-05T12:00:37.777731+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "sales", "status": "ok", "message": "Falling back to Reports navigation for Sales", "target_url": "https://subs.quickdrycleaning.com/a668/App/Reports/NEWSalesAndDeliveryReport", "last_final_url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2017:29:7", "last_reason": "sales_link_missing", "ts": "2026-01-05T12:00:37.778892+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "sales", "status": "ok", "message": "Starting Sales navigation via Reports", "navigation_method": "reports_nav", "navigation_path": "reports_nav", "nav_selector": "#achrOrderReport", "sales_link_selector": "a[href*='NEWSalesAndDeliveryReport'], a[href*='SalesAndDeliveryReport']", "retry_status": "primary", "ts": "2026-01-05T12:00:37.779056+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "sales", "status": "ok", "message": "Waiting for Reports navigation selector", "navigation_method": "reports_nav", "navigation_path": "reports_nav", "nav_selector": "#achrOrderReport", "retry_status": "primary", "ts": "2026-01-05T12:00:37.779130+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "sales", "status": "ok", "message": "Sales navigation attempt", "navigation_method": "reports_nav", "navigation_path": "reports_nav", "attempt": "primary", "retry_status": "primary", "success": false, "final_url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2017:29:7", "target_url": "https://subs.quickdrycleaning.com/a668/App/Reports/NEWSalesAndDeliveryReport", "nav_selector": "#achrOrderReport", "sales_link_selector": "a[href*='NEWSalesAndDeliveryReport'], a[href*='SalesAndDeliveryReport']", "reason": "nav_selector_missing", "url_transitions": [{"label": "start", "url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2017:29:7"}], "ts": "2026-01-05T12:02:07.781510+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "sales", "status": "warn", "message": "Sales & Delivery report navigation failed after retry", "final_url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2017:29:7", "target_url": "https://subs.quickdrycleaning.com/a668/App/Reports/NEWSalesAndDeliveryReport", "reason": "nav_selector_missing", "attempts": [{"navigation_method": "direct", "navigation_path": "direct_url", "attempt": "initial", "retry_status": "initial", "success": false, "final_url": "https://subs.quickdrycleaning.com/Login", "target_url": "https://subs.quickdrycleaning.com/a668/App/Reports/NEWSalesAndDeliveryReport", "nav_selector": "#achrOrderReport", "sales_link_selector": "a[href*='NEWSalesAndDeliveryReport'], a[href*='SalesAndDeliveryReport']", "reason": "login_redirect", "url_transitions": [{"label": "start", "url": "https://subs.quickdrycleaning.com/a668/App/home?EventClick=True"}, {"label": "after_direct_goto", "url": "https://subs.quickdrycleaning.com/Login"}, {"label": "after_direct_wait", "url": "https://subs.quickdrycleaning.com/Login"}]}, {"navigation_method": "reports_nav", "navigation_path": "home_reports_sales", "attempt": "after_login", "retry_status": "after_login", "success": false, "final_url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2017:29:7", "target_url": "https://subs.quickdrycleaning.com/a668/App/Reports/NEWSalesAndDeliveryReport", "nav_selector": "#achrOrderReport", "sales_link_selector": "a[href*='NEWSalesAndDeliveryReport'], a[href*='SalesAndDeliveryReport']", "reason": "sales_link_missing", "url_transitions": [{"label": "start", "url": "https://subs.quickdrycleaning.com/a668/App/home?EventClick=True"}, {"label": "home_ready", "url": "https://subs.quickdrycleaning.com/a668/App/home?EventClick=True"}, {"label": "after_reports_click", "url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2017:29:7"}]}, {"navigation_method": "reports_nav", "navigation_path": "reports_nav", "attempt": "primary", "retry_status": "primary", "success": false, "final_url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2017:29:7", "target_url": "https://subs.quickdrycleaning.com/a668/App/Reports/NEWSalesAndDeliveryReport", "nav_selector": "#achrOrderReport", "sales_link_selector": "a[href*='NEWSalesAndDeliveryReport'], a[href*='SalesAndDeliveryReport']", "reason": "nav_selector_missing", "url_transitions": [{"label": "start", "url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2017:29:7"}]}], "navigation_method": "reports_nav", "navigation_path": "reports_nav", "retry_status": "primary", "ts": "2026-01-05T12:02:07.781729+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "sales", "status": "warn", "message": "Sales navigation outcome", "navigation_method": "reports_nav", "navigation_path": "reports_nav", "retry_status": "primary", "final_url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2017:29:7", "reason": "nav_selector_missing", "attempts": [{"navigation_method": "direct", "navigation_path": "direct_url", "attempt": "initial", "retry_status": "initial", "success": false, "final_url": "https://subs.quickdrycleaning.com/Login", "target_url": "https://subs.quickdrycleaning.com/a668/App/Reports/NEWSalesAndDeliveryReport", "nav_selector": "#achrOrderReport", "sales_link_selector": "a[href*='NEWSalesAndDeliveryReport'], a[href*='SalesAndDeliveryReport']", "reason": "login_redirect", "url_transitions": [{"label": "start", "url": "https://subs.quickdrycleaning.com/a668/App/home?EventClick=True"}, {"label": "after_direct_goto", "url": "https://subs.quickdrycleaning.com/Login"}, {"label": "after_direct_wait", "url": "https://subs.quickdrycleaning.com/Login"}]}, {"navigation_method": "reports_nav", "navigation_path": "home_reports_sales", "attempt": "after_login", "retry_status": "after_login", "success": false, "final_url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2017:29:7", "target_url": "https://subs.quickdrycleaning.com/a668/App/Reports/NEWSalesAndDeliveryReport", "nav_selector": "#achrOrderReport", "sales_link_selector": "a[href*='NEWSalesAndDeliveryReport'], a[href*='SalesAndDeliveryReport']", "reason": "sales_link_missing", "url_transitions": [{"label": "start", "url": "https://subs.quickdrycleaning.com/a668/App/home?EventClick=True"}, {"label": "home_ready", "url": "https://subs.quickdrycleaning.com/a668/App/home?EventClick=True"}, {"label": "after_reports_click", "url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2017:29:7"}]}, {"navigation_method": "reports_nav", "navigation_path": "reports_nav", "attempt": "primary", "retry_status": "primary", "success": false, "final_url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2017:29:7", "target_url": "https://subs.quickdrycleaning.com/a668/App/Reports/NEWSalesAndDeliveryReport", "nav_selector": "#achrOrderReport", "sales_link_selector": "a[href*='NEWSalesAndDeliveryReport'], a[href*='SalesAndDeliveryReport']", "reason": "nav_selector_missing", "url_transitions": [{"label": "start", "url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2017:29:7"}]}], "ts": "2026-01-05T12:02:07.782258+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "sales", "status": "warn", "message": "Navigation to Sales & Delivery report did not complete", "final_url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2017:29:7", "ts": "2026-01-05T12:02:07.782748+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A668", "phase": "store", "status": "ok", "message": "Completed TD orders store discovery", "session_reused": true, "ts": "2026-01-05T12:02:07.782917+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "store", "status": "ok", "message": "Starting TD orders store discovery", "run_env": "dev", "from_date": "2025-12-06", "to_date": "2026-01-05", "ts": "2026-01-05T12:02:07.824686+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "session", "status": "ok", "message": "Storage state found; probing session validity", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A817_storage_state.json", "ts": "2026-01-05T12:02:08.393251+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "session", "status": "warn", "message": "Probed session with existing storage state", "response_status": 200, "final_url": "https://subs.quickdrycleaning.com/Login", "contains_store_code": false, "verification_seen": false, "login_detected": true, "nav_visible": false, "home_card_visible": false, "state_valid": false, "invalid_reason": "login_form_visible", "probe_error": null, "probe_target": "https://subs.quickdrycleaning.com/a817/App/home?EventClick=True", "contains_store_path": false, "ts": "2026-01-05T12:02:13.954342+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "session", "status": "ok", "message": "Storage state probe invalid; performing login", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A817_storage_state.json", "probe_reason": "login_form_visible", "probe_valid": false, "verification_seen": false, "nav_visible": false, "home_card_visible": false, "re_login_performed": true, "ts": "2026-01-05T12:02:13.954508+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "login", "status": "ok", "message": "Completed login attempt", "final_url": "https://subs.quickdrycleaning.com/a817/App/home?EventClick=True", "contains_store_code": true, "post_login_wait_completed": "url_contains_store_code", "post_login_wait_error": null, "submit_error": null, "selectors": {"username": "#txtUserId", "password": "#txtPassword", "store_code": "#txtBranchPin", "submit": "#btnLogin"}, "ts": "2026-01-05T12:02:15.040907+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "session", "status": "ok", "message": "Login completed; session ready", "final_url": "https://subs.quickdrycleaning.com/a817/App/home?EventClick=True", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A817_storage_state.json", "probe_reason": "login_form_visible", "probe_valid": false, "login_performed": true, "re_login_performed": true, "ts": "2026-01-05T12:02:15.041042+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "session", "status": "ok", "message": "Session ready after OTP/verification wait", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A817_storage_state.json", "final_url": "https://subs.quickdrycleaning.com/a817/App/home?EventClick=True", "verification_seen": false, "login_performed": true, "ts": "2026-01-05T12:02:15.041149+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "login", "status": "ok", "message": "Home page ready after login/verification", "final_url": "https://subs.quickdrycleaning.com/a817/App/home?EventClick=True", "nav_selector": "#achrOrderReport", "nav_visible": true, "home_card_visible": false, "ts": "2026-01-05T12:02:15.875771+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "home", "status": "ok", "message": "Navigation controls snapshot", "links": [{"index": 0, "text": "Home    \n(Ctrl+H)", "href": "home.html?ClearContent=1-0-2026 17:32:15", "visible": true}, {"index": 1, "text": "Dashboard", "href": "Bookings_New/frmDashBoard.aspx?ClearContent=1-0-2026 17:32:15", "visible": false}, {"index": 2, "text": "Customer", "href": "New_Admin/frmNewCustomer.aspx?ClearContent=1-0-2026 17:32:15", "visible": true}, {"index": 3, "text": "Drop (F1)", "href": "", "visible": false}, {"index": 4, "text": "Reports", "href": "Reports/OrderReport.aspx?ClearContent=1-0-2026 17:32:15", "visible": true}], "ts": "2026-01-05T12:02:15.984988+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "session", "status": "ok", "message": "Stored refreshed session state after home detection", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A817_storage_state.json", "verification_seen": false, "ts": "2026-01-05T12:02:15.993464+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "session", "status": "ok", "message": "Persisted storage state for A817 after home detection", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A817_storage_state.json", "session_reused": true, "refreshed": true, "ts": "2026-01-05T12:02:15.993530+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "orders", "status": "ok", "message": "Skipping Orders iframe flow because Orders segment was disabled by flag", "ts": "2026-01-05T12:02:15.993571+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "sales", "status": "ok", "message": "Starting Sales navigation via direct URL", "navigation_method": "direct", "navigation_path": "direct_url", "target_url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport", "ts": "2026-01-05T12:02:15.993785+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "sales", "status": "ok", "message": "Waiting for Sales URL match after direct navigation", "navigation_method": "direct", "navigation_path": "direct_url", "target_pattern": "/A817/App/Reports/NEWSalesAndDeliveryReport", "target_url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport", "ts": "2026-01-05T12:02:16.123730+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "sales", "status": "warn", "message": "Sales destination validation failed after direct navigation", "navigation_method": "direct", "navigation_path": "direct_url", "final_url": "https://subs.quickdrycleaning.com/Login", "target_url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport", "contains_store_code": false, "contains_sales_path": false, "is_login_url": true, "ts": "2026-01-05T12:03:46.139101+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "sales", "status": "ok", "message": "Sales navigation attempt", "navigation_method": "direct", "navigation_path": "direct_url", "attempt": "initial", "retry_status": "initial", "success": false, "final_url": "https://subs.quickdrycleaning.com/Login", "target_url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport", "nav_selector": "#achrOrderReport", "sales_link_selector": "a[href*='NEWSalesAndDeliveryReport'], a[href*='SalesAndDeliveryReport']", "reason": "login_redirect", "url_transitions": [{"label": "start", "url": "https://subs.quickdrycleaning.com/a817/App/home?EventClick=True"}, {"label": "after_direct_goto", "url": "https://subs.quickdrycleaning.com/Login"}, {"label": "after_direct_wait", "url": "https://subs.quickdrycleaning.com/Login"}], "ts": "2026-01-05T12:03:46.139254+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "login", "status": "ok", "message": "Completed login attempt", "final_url": "https://subs.quickdrycleaning.com/a817/App/home?EventClick=True", "contains_store_code": true, "post_login_wait_completed": "url_contains_store_code", "post_login_wait_error": null, "submit_error": null, "selectors": {"username": "#txtUserId", "password": "#txtPassword", "store_code": "#txtBranchPin", "submit": "#btnLogin"}, "ts": "2026-01-05T12:03:47.046909+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "login", "status": "ok", "message": "Home page ready after login/verification", "final_url": "https://subs.quickdrycleaning.com/a817/App/home?EventClick=True", "nav_selector": "#achrOrderReport", "nav_visible": true, "home_card_visible": false, "ts": "2026-01-05T12:03:48.877120+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "sales", "status": "ok", "message": "Refreshed storage state after Sales re-login", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A817_storage_state.json", "final_url": "https://subs.quickdrycleaning.com/a817/App/home?EventClick=True", "ts": "2026-01-05T12:03:48.884831+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "sales", "status": "ok", "message": "Retrying Sales navigation via Reports after login redirect or validation failure using authenticated path", "retry_status": "after_login", "target_url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport", "last_reason": "login_redirect", "navigation_path": "home_reports_sales", "ts": "2026-01-05T12:03:48.885016+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "sales", "status": "ok", "message": "Navigating to Sales via home → reports → sales path", "navigation_method": "reports_nav_after_login", "navigation_path": "home_reports_sales", "nav_selector": "#achrOrderReport", "sales_link_selector": "a[href*='NEWSalesAndDeliveryReport'], a[href*='SalesAndDeliveryReport']", "retry_status": "after_login", "home_url": "https://subs.quickdrycleaning.com/a668/App/home", "ts": "2026-01-05T12:03:48.885160+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "login", "status": "ok", "message": "Home page ready after login/verification", "final_url": "https://subs.quickdrycleaning.com/a817/App/home?EventClick=True", "nav_selector": "#achrOrderReport", "nav_visible": true, "home_card_visible": false, "ts": "2026-01-05T12:03:48.894015+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "sales", "status": "ok", "message": "Starting Sales navigation via Reports", "navigation_method": "reports_nav_after_login", "navigation_path": "home_reports_sales", "nav_selector": "#achrOrderReport", "sales_link_selector": "a[href*='NEWSalesAndDeliveryReport'], a[href*='SalesAndDeliveryReport']", "retry_status": "after_login", "ts": "2026-01-05T12:03:48.894106+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "sales", "status": "ok", "message": "Waiting for Reports navigation selector", "navigation_method": "reports_nav_after_login", "navigation_path": "home_reports_sales", "nav_selector": "#achrOrderReport", "retry_status": "after_login", "ts": "2026-01-05T12:03:48.894154+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "sales", "status": "ok", "message": "Reports navigation selector available", "navigation_method": "reports_nav_after_login", "navigation_path": "home_reports_sales", "nav_selector": "#achrOrderReport", "retry_status": "after_login", "ts": "2026-01-05T12:03:48.901931+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "sales", "status": "ok", "message": "Clicking Reports navigation selector", "navigation_method": "reports_nav_after_login", "navigation_path": "home_reports_sales", "nav_selector": "#achrOrderReport", "retry_status": "after_login", "ts": "2026-01-05T12:03:48.902022+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "sales", "status": "ok", "message": "Clicked Reports navigation selector", "navigation_method": "reports_nav_after_login", "navigation_path": "home_reports_sales", "nav_selector": "#achrOrderReport", "retry_status": "after_login", "url_after_reports_click": "https://subs.quickdrycleaning.com/a817/App/Reports/OrderReport?ClearContent=1-0-2026%2017:33:48", "ts": "2026-01-05T12:03:49.556814+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "sales", "status": "ok", "message": "Waiting for Sales link selector", "navigation_method": "reports_nav_after_login", "navigation_path": "home_reports_sales", "sales_link_selector": "a[href*='NEWSalesAndDeliveryReport'], a[href*='SalesAndDeliveryReport']", "retry_status": "after_login", "ts": "2026-01-05T12:03:49.556916+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "sales", "status": "ok", "message": "Sales link selector available", "navigation_method": "reports_nav_after_login", "navigation_path": "home_reports_sales", "sales_link_selector": "a[href*='NEWSalesAndDeliveryReport'], a[href*='SalesAndDeliveryReport']", "retry_status": "after_login", "ts": "2026-01-05T12:03:50.009006+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "sales", "status": "ok", "message": "Clicking Sales link selector", "navigation_method": "reports_nav_after_login", "navigation_path": "home_reports_sales", "sales_link_selector": "a[href*='NEWSalesAndDeliveryReport'], a[href*='SalesAndDeliveryReport']", "retry_status": "after_login", "ts": "2026-01-05T12:03:50.009128+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "sales", "status": "ok", "message": "Clicked Sales link selector", "navigation_method": "reports_nav_after_login", "navigation_path": "home_reports_sales", "sales_link_selector": "a[href*='NEWSalesAndDeliveryReport'], a[href*='SalesAndDeliveryReport']", "retry_status": "after_login", "url_after_sales_click": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport?ClearContent=05%20Jan%202026%2017:33:49:623", "ts": "2026-01-05T12:03:50.745954+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "sales", "status": "ok", "message": "Waiting for Sales URL match after Reports navigation", "navigation_method": "reports_nav_after_login", "navigation_path": "home_reports_sales", "target_pattern": "/A817/App/Reports/NEWSalesAndDeliveryReport", "target_url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport", "retry_status": "after_login", "ts": "2026-01-05T12:03:50.746351+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "sales", "status": "ok", "message": "Finished waiting for Sales URL after Reports navigation", "navigation_method": "reports_nav_after_login", "navigation_path": "home_reports_sales", "target_pattern": "/A817/App/Reports/NEWSalesAndDeliveryReport", "target_url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport", "retry_status": "after_login", "ts": "2026-01-05T12:03:50.871975+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "sales", "status": "ok", "message": "Sales navigation attempt", "navigation_method": "reports_nav", "navigation_path": "home_reports_sales", "attempt": "after_login", "retry_status": "after_login", "success": true, "final_url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport?ClearContent=05%20Jan%202026%2017:33:49:623", "target_url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport", "nav_selector": "#achrOrderReport", "sales_link_selector": "a[href*='NEWSalesAndDeliveryReport'], a[href*='SalesAndDeliveryReport']", "reason": "ok", "url_transitions": [{"label": "start", "url": "https://subs.quickdrycleaning.com/a817/App/home?EventClick=True"}, {"label": "home_ready", "url": "https://subs.quickdrycleaning.com/a817/App/home?EventClick=True"}, {"label": "after_reports_click", "url": "https://subs.quickdrycleaning.com/a817/App/Reports/OrderReport?ClearContent=1-0-2026%2017:33:48"}, {"label": "after_sales_click", "url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport?ClearContent=05%20Jan%202026%2017:33:49:623"}, {"label": "after_sales_wait", "url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport?ClearContent=05%20Jan%202026%2017:33:49:623"}], "ts": "2026-01-05T12:03:50.872163+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "sales", "status": "ok", "message": "Navigated to Sales & Delivery report page via Reports navigation after login", "final_url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport?ClearContent=05%20Jan%202026%2017:33:49:623", "target_url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport", "navigation_method": "reports_nav_after_login", "navigation_path": "home_reports_sales", "retry_status": "after_login", "attempts": [{"navigation_method": "direct", "navigation_path": "direct_url", "attempt": "initial", "retry_status": "initial", "success": false, "final_url": "https://subs.quickdrycleaning.com/Login", "target_url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport", "nav_selector": "#achrOrderReport", "sales_link_selector": "a[href*='NEWSalesAndDeliveryReport'], a[href*='SalesAndDeliveryReport']", "reason": "login_redirect", "url_transitions": [{"label": "start", "url": "https://subs.quickdrycleaning.com/a817/App/home?EventClick=True"}, {"label": "after_direct_goto", "url": "https://subs.quickdrycleaning.com/Login"}, {"label": "after_direct_wait", "url": "https://subs.quickdrycleaning.com/Login"}]}, {"navigation_method": "reports_nav", "navigation_path": "home_reports_sales", "attempt": "after_login", "retry_status": "after_login", "success": true, "final_url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport?ClearContent=05%20Jan%202026%2017:33:49:623", "target_url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport", "nav_selector": "#achrOrderReport", "sales_link_selector": "a[href*='NEWSalesAndDeliveryReport'], a[href*='SalesAndDeliveryReport']", "reason": "ok", "url_transitions": [{"label": "start", "url": "https://subs.quickdrycleaning.com/a817/App/home?EventClick=True"}, {"label": "home_ready", "url": "https://subs.quickdrycleaning.com/a817/App/home?EventClick=True"}, {"label": "after_reports_click", "url": "https://subs.quickdrycleaning.com/a817/App/Reports/OrderReport?ClearContent=1-0-2026%2017:33:48"}, {"label": "after_sales_click", "url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport?ClearContent=05%20Jan%202026%2017:33:49:623"}, {"label": "after_sales_wait", "url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport?ClearContent=05%20Jan%202026%2017:33:49:623"}]}], "ts": "2026-01-05T12:03:50.874434+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "sales", "status": null, "message": "Sales navigation outcome", "navigation_method": "reports_nav_after_login", "navigation_path": "home_reports_sales", "retry_status": "after_login", "final_url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport?ClearContent=05%20Jan%202026%2017:33:49:623", "reason": null, "attempts": [{"navigation_method": "direct", "navigation_path": "direct_url", "attempt": "initial", "retry_status": "initial", "success": false, "final_url": "https://subs.quickdrycleaning.com/Login", "target_url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport", "nav_selector": "#achrOrderReport", "sales_link_selector": "a[href*='NEWSalesAndDeliveryReport'], a[href*='SalesAndDeliveryReport']", "reason": "login_redirect", "url_transitions": [{"label": "start", "url": "https://subs.quickdrycleaning.com/a817/App/home?EventClick=True"}, {"label": "after_direct_goto", "url": "https://subs.quickdrycleaning.com/Login"}, {"label": "after_direct_wait", "url": "https://subs.quickdrycleaning.com/Login"}]}, {"navigation_method": "reports_nav", "navigation_path": "home_reports_sales", "attempt": "after_login", "retry_status": "after_login", "success": true, "final_url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport?ClearContent=05%20Jan%202026%2017:33:49:623", "target_url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport", "nav_selector": "#achrOrderReport", "sales_link_selector": "a[href*='NEWSalesAndDeliveryReport'], a[href*='SalesAndDeliveryReport']", "reason": "ok", "url_transitions": [{"label": "start", "url": "https://subs.quickdrycleaning.com/a817/App/home?EventClick=True"}, {"label": "home_ready", "url": "https://subs.quickdrycleaning.com/a817/App/home?EventClick=True"}, {"label": "after_reports_click", "url": "https://subs.quickdrycleaning.com/a817/App/Reports/OrderReport?ClearContent=1-0-2026%2017:33:48"}, {"label": "after_sales_click", "url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport?ClearContent=05%20Jan%202026%2017:33:49:623"}, {"label": "after_sales_wait", "url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport?ClearContent=05%20Jan%202026%2017:33:49:623"}]}], "ts": "2026-01-05T12:03:50.874757+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "sales", "status": "ok", "message": "Report container ready; iframe attached", "final_url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport?ClearContent=05%20Jan%202026%2017:33:49:623", "iframe_src_hostname": "reports.quickdrycleaning.com", "iframe_src_prefix": "https://reports.quickdrycleaning.com/en/sales-and-delivery?token", "iframe_src_length": 764, "iframe_attached": true, "ts": "2026-01-05T12:03:50.909209+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "iframe", "status": "ok", "message": "Iframe hydration observations", "observed_controls": [{"label": "download_link", "count": 1, "texts": ["Download historical report"]}], "observed_spinners": [{"label": "kendo_loading_mask", "selector": ".k-loading-mask", "count": 0, "visible": false, "ever_visible": false, "waited_for_hidden": false}, {"label": "progress_loader", "selector": "img[alt*='loading' i]", "count": 0, "visible": false, "ever_visible": false, "waited_for_hidden": false}, {"label": "loading_text", "selector": "text=/loading/i", "count": 1, "visible": true, "ever_visible": true, "waited_for_hidden": true}], "ts": "2026-01-05T12:03:53.428386+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "iframe", "status": "ok", "message": "Date range set via date-range control", "from_value": "2025-12-06", "to_value": "2026-01-05", "numeric_input_count": 6, "used_numeric_triplets": true, "range_text": "Dec 6, 2025 - Jan 5, 2026", "update_click": {"found": true, "clicked": true}, "attempt": 1, "ts": "2026-01-05T12:04:00.698672+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "iframe", "status": "ok", "message": "Report modal closed after request", "waited_ms": 412, "ts": "2026-01-05T12:04:01.228302+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "iframe", "status": "ok", "message": "Iframe body log executed", "label": "iframe_body_after_modal_close", "body_log_attempted": true, "body_html_captured": false, "body_html_length": null, "ts": "2026-01-05T12:04:01.228432+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "iframe", "status": "ok", "message": "Report Requests container located", "container_locator_strategy": "heading_preferred_wrapper", "ts": "2026-01-05T12:04:01.311670+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "iframe", "status": "ok", "message": "Using TD orders locator strategies", "container_locator_strategy": "heading_preferred_wrapper", "range_match_strategy": "date_range_text_pattern", "download_locator_strategy": "href_contains_order_reports", "ts": "2026-01-05T12:04:01.311784+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "iframe", "status": "ok", "message": "Observed Report Requests rows", "row_count": 3, "first_row_text": "S. No. Date Range Requested Status", "matched_range_examples": ["S. No. Date Range Requested Status", "Report Requests Refresh"], "container_locator_strategy": "heading_preferred_wrapper", "ts": "2026-01-05T12:04:01.482411+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "iframe", "status": "ok", "message": "Captured Report Requests container structure", "label": "report_requests_after_request", "row_count": 5, "container_locator_strategy": "heading_preferred_wrapper", "ts": "2026-01-05T12:04:01.617549+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "iframe", "status": "ok", "message": "Selected Report Requests row for follow-up", "matched_range_text": "06 Dec 2025 - 05 Jan 2026", "status_text": "1 06 Dec 2025 - 05 Jan 2026 05 Jan 2026 05:34 PM Download", "expected_range_texts": ["Dec 6, 2025 - Jan 5, 2026", "06 Dec 2025 - 05 Jan 2026", "Dec 06, 2025 - Jan 05, 2026", "Dec 06 2025 - Jan 05 2026", "06 Dec 2025 - 5 Jan 2026", "Dec 06, 2025 - Jan 5, 2026", "Dec 06 2025 - Jan 5 2026", "6 Dec 2025 - 05 Jan 2026", "Dec 6, 2025 - Jan 05, 2026", "Dec 6 2025 - Jan 05 2026", "6 Dec 2025 - 5 Jan 2026", "Dec 6 2025 - Jan 5 2026"], "all_row_texts": ["06 Dec 2025 - 05 Jan 2026", "06 Dec 2025 - 05 Jan 2026", "06 Dec 2025 - 05 Jan 2026"], "range_match_strategy": "date_range_text_pattern", "download_locator_strategy": "href_contains_sales_reports", "container_locator_strategy": "heading_preferred_wrapper", "selected_row_state": "downloadable", "selection_source": "downloadable_row", "ts": "2026-01-05T12:05:31.947374+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "iframe", "status": "ok", "message": "Report Requests row ready for download", "matched_range_text": "06 Dec 2025 - 05 Jan 2026", "status_text": "1 06 Dec 2025 - 05 Jan 2026 05 Jan 2026 05:34 PM Download", "expected_range_texts": ["Dec 6, 2025 - Jan 5, 2026", "06 Dec 2025 - 05 Jan 2026", "Dec 06, 2025 - Jan 05, 2026", "Dec 06 2025 - Jan 05 2026", "06 Dec 2025 - 5 Jan 2026", "Dec 06, 2025 - Jan 5, 2026", "Dec 06 2025 - Jan 5 2026", "6 Dec 2025 - 05 Jan 2026", "Dec 6, 2025 - Jan 05, 2026", "Dec 6 2025 - Jan 05 2026", "6 Dec 2025 - 5 Jan 2026", "Dec 6 2025 - Jan 5 2026"], "all_row_texts": ["06 Dec 2025 - 05 Jan 2026", "06 Dec 2025 - 05 Jan 2026", "06 Dec 2025 - 05 Jan 2026"], "download_control_visible": true, "matched_row_text_full": "06 Dec 2025 - 05 Jan 2026", "range_match_strategy": "date_range_text_pattern", "download_locator_strategy": "href_contains_sales_reports", "container_locator_strategy": "heading_preferred_wrapper", "selected_row_state": "downloadable", "selection_source": "downloadable_row", "ts": "2026-01-05T12:05:31.948049+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "iframe", "status": "ok", "message": "Orders report download saved", "download_path": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/data/A817_td_sales_20251206_20260105.xlsx", "suggested_filename": "1247-wgHEGYUe5JAjEexVgiIG3.xlsx", "matched_range_text": "06 Dec 2025 - 05 Jan 2026", "expected_range_texts": ["Dec 6, 2025 - Jan 5, 2026", "06 Dec 2025 - 05 Jan 2026", "Dec 06, 2025 - Jan 05, 2026", "Dec 06 2025 - Jan 05 2026", "06 Dec 2025 - 5 Jan 2026", "Dec 06, 2025 - Jan 5, 2026", "Dec 06 2025 - Jan 5 2026", "6 Dec 2025 - 05 Jan 2026", "Dec 6, 2025 - Jan 05, 2026", "Dec 6 2025 - Jan 05 2026", "6 Dec 2025 - 5 Jan 2026", "Dec 6 2025 - Jan 5 2026"], "download_locator_strategy": "href_contains_sales_reports", "range_match_strategy": "date_range_text_pattern", "container_locator_strategy": "heading_preferred_wrapper", "selected_row_state": "downloadable", "selection_source": "downloadable_row", "ts": "2026-01-05T12:05:32.655162+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "sales", "status": "ok", "message": "Sales & Delivery report downloaded", "download_path": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/data/A817_td_sales_20251206_20260105.xlsx", "ts": "2026-01-05T12:05:32.655466+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "sales_ingest", "status": "error", "message": "TD Sales ingestion failed", "error": "(sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column \"ingest_remark\" of relation \"stg_td_sales\" does not exist\n[SQL: INSERT INTO stg_td_sales (run_id, run_date, cost_center, store_code, order_date, payment_date, order_number, customer_code, customer_name, customer_address, mobile_number, payment_received, adjustments, balance, accepted_by, payment_mode, transaction_id, payment_made_at, order_type, is_duplicate, is_edited_order, ingest_remark) VALUES ($1::VARCHAR, $2::TIMESTAMP WITH TIME ZONE, $3::VARCHAR, $4::VARCHAR, $5::TIMESTAMP WITH TIME ZONE, $6::TIMESTAMP WITH TIME ZONE, $7::VARCHAR, $8::VARCHAR, $9::VARCHAR, $10::VARCHAR, $11::VARCHAR, $12::NUMERIC(12, 2), $13::NUMERIC(12, 2), $14::NUMERIC(12, 2), $15::VARCHAR, $16::VARCHAR, $17::VARCHAR, $18::VARCHAR, $19::VARCHAR, $20::BOOLEAN, $21::BOOLEAN, $22::VARCHAR) ON CONFLICT (store_code, order_number, payment_date) DO UPDATE SET run_id = excluded.run_id, run_date = excluded.run_date, cost_center = excluded.cost_center, store_code = excluded.store_code, order_date = excluded.order_date, payment_date = excluded.payment_date, order_number = excluded.order_number, customer_code = excluded.customer_code, customer_name = excluded.customer_name, customer_address = excluded.customer_address, mobile_number = excluded.mobile_number, payment_received = excluded.payment_received, adjustments = excluded.adjustments, balance = excluded.balance, accepted_by = excluded.accepted_by, payment_mode = excluded.payment_mode, transaction_id = excluded.transaction_id, payment_made_at = excluded.payment_made_at, order_type = excluded.order_type, is_duplicate = excluded.is_duplicate, is_edited_order = excluded.is_edited_order, ingest_remark = excluded.ingest_remark RETURNING stg_td_sales.id]\n[parameters: ('20260105_115722688123', datetime.datetime(2026, 1, 5, 17, 27, 22, 690858, tzinfo=zoneinfo.ZoneInfo(key='Asia/Kolkata')), 'KN3817', 'A817', datetime.datetime(2025, 9, 6, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Kolkata')), datetime.datetime(2025, 12, 8, 9, 31, 13, tzinfo=zoneinfo.ZoneInfo(key='Asia/Kolkata')), 'T588', 'Cust2776297', 'Tumbledry Solutions Pvt Ltd 09aahct2140e1zl', 'SS Delhi Bali Nagar ES3867461)Property bearing Number F100 area admeasuring 200 sqyds Bali Nagar New Delhi 110015 nali nagar Bali Indonesia', '7060826892', Decimal('1338'), Decimal('0'), Decimal('0'), 'TDKirtiNagar', 'PhonePe', None, 'Walk in Customer', 'Order', False, False, None)]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "ts": "2026-01-05T12:05:32.932742+00:00"}
{"run_id": "20260105_115722688123", "store_code": "A817", "phase": "store", "status": "ok", "message": "Completed TD orders store discovery", "session_reused": true, "ts": "2026-01-05T12:05:32.933200+00:00"}
{"run_id": "20260105_115722688123", "phase": "notifications", "status": "ok", "message": "TD orders sync discovery flow complete; notifying", "run_env": "dev", "ts": "2026-01-05T12:05:33.248480+00:00"}
{"run_id": "20260105_115722688123", "phase": "run_summary", "status": "ok", "message": "Run summary inserted", "overall_status": "error", "ts": "2026-01-05T12:05:33.346739+00:00"}
