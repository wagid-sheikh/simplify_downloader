{"run_id": "20260105_132405818869", "phase": "init", "status": "ok", "message": "Starting TD orders sync discovery flow", "run_env": "dev", "from_date": "2025-12-06", "to_date": "2026-01-05", "ts": "2026-01-05T13:24:05.821498+00:00"}
{"run_id": "20260105_132405818869", "phase": "init", "status": "warn", "message": "Temporarily restricting TD orders discovery to a subset of stores", "stores": ["A668", "A817"], "skipped_stores": null, "ts": "2026-01-05T13:24:05.888078+00:00"}
{"run_id": "20260105_132405818869", "phase": "init", "status": "ok", "message": "Loaded TD store rows", "store_count": 2, "stores": ["A668", "A817"], "ts": "2026-01-05T13:24:05.888181+00:00"}
{"run_id": "20260105_132405818869", "phase": "init", "status": "ok", "message": "Launching Playwright with local Chrome executable", "backend": "local_chrome", "executable_path": "/Applications/Google Chrome.app/Contents/MacOS/Google Chrome", "headless": false, "ts": "2026-01-05T13:24:06.915985+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A668", "phase": "store", "status": "ok", "message": "Starting TD orders store discovery", "run_env": "dev", "from_date": "2025-12-06", "to_date": "2026-01-05", "ts": "2026-01-05T13:24:07.490772+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A668", "phase": "session", "status": "ok", "message": "Storage state found; probing session validity", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A668_storage_state.json", "ts": "2026-01-05T13:24:08.267466+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A668", "phase": "session", "status": "warn", "message": "Probed session with existing storage state", "response_status": 200, "final_url": "https://subs.quickdrycleaning.com/Login", "contains_store_code": false, "verification_seen": false, "login_detected": true, "nav_visible": false, "home_card_visible": false, "state_valid": false, "invalid_reason": "login_form_visible", "probe_error": null, "probe_target": "https://subs.quickdrycleaning.com/a668/App/home?EventClick=True", "contains_store_path": false, "ts": "2026-01-05T13:24:13.949965+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A668", "phase": "session", "status": "ok", "message": "Storage state probe invalid; performing login", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A668_storage_state.json", "probe_reason": "login_form_visible", "probe_valid": false, "verification_seen": false, "nav_visible": false, "home_card_visible": false, "re_login_performed": true, "ts": "2026-01-05T13:24:13.950139+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A668", "phase": "login", "status": "ok", "message": "Completed login attempt", "final_url": "https://subs.quickdrycleaning.com/a668/App/home?EventClick=True", "contains_store_code": true, "post_login_wait_completed": "url_contains_store_code", "post_login_wait_error": null, "submit_error": null, "selectors": {"username": "#txtUserId", "password": "#txtPassword", "store_code": "#txtBranchPin", "submit": "#btnLogin"}, "ts": "2026-01-05T13:24:15.042507+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A668", "phase": "session", "status": "ok", "message": "Login completed; session ready", "final_url": "https://subs.quickdrycleaning.com/a668/App/home?EventClick=True", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A668_storage_state.json", "probe_reason": "login_form_visible", "probe_valid": false, "login_performed": true, "re_login_performed": true, "ts": "2026-01-05T13:24:15.042694+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A668", "phase": "session", "status": "ok", "message": "Session ready after OTP/verification wait", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A668_storage_state.json", "final_url": "https://subs.quickdrycleaning.com/a668/App/home?EventClick=True", "verification_seen": false, "login_performed": true, "ts": "2026-01-05T13:24:15.042825+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A668", "phase": "login", "status": "ok", "message": "Home page ready after login/verification", "final_url": "https://subs.quickdrycleaning.com/a668/App/home?EventClick=True", "nav_selector": "#achrOrderReport", "nav_visible": true, "home_card_visible": false, "ts": "2026-01-05T13:24:15.812690+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A668", "phase": "home", "status": "ok", "message": "Navigation controls snapshot", "links": [{"index": 0, "text": "Home    \n(Ctrl+H)", "href": "home.html?ClearContent=1-0-2026 18:54:15", "visible": true}, {"index": 1, "text": "Dashboard", "href": "Bookings_New/frmDashBoard.aspx?ClearContent=1-0-2026 18:54:15", "visible": false}, {"index": 2, "text": "Customer", "href": "New_Admin/frmNewCustomer.aspx?ClearContent=1-0-2026 18:54:15", "visible": true}, {"index": 3, "text": "Drop (F1)", "href": "", "visible": false}, {"index": 4, "text": "Reports", "href": "Reports/OrderReport.aspx?ClearContent=1-0-2026 18:54:15", "visible": true}], "ts": "2026-01-05T13:24:15.925490+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A668", "phase": "session", "status": "ok", "message": "Stored refreshed session state after home detection", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A668_storage_state.json", "verification_seen": false, "ts": "2026-01-05T13:24:15.936725+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A668", "phase": "orders", "status": "ok", "message": "Skipping Orders iframe flow because Orders segment was disabled by flag", "ts": "2026-01-05T13:24:15.936809+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A668", "phase": "sales", "status": "ok", "message": "Navigating to Orders container before Sales", "navigation_method": "orders_reports_tile", "navigation_path": "orders_left_nav", "retry_status": "initial", "nav_selector": "#achrOrderReport", "ts": "2026-01-05T13:24:15.937226+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A668", "phase": "orders", "status": "ok", "message": "Navigated to Orders container via Reports entry", "final_url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2018:54:15", "nav_selector": "#achrOrderReport", "ts": "2026-01-05T13:24:16.814453+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A668", "phase": "sales", "status": "ok", "message": "Sales left-nav candidates snapshot", "samples": [{"index": 0, "href": "#", "normalized_href": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2018:54:15", "text": "", "visible": true, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 1, "href": "../home.html?ClearContent=05 Jan 2026 18:54:16:337", "normalized_href": "https://subs.quickdrycleaning.com/a668/App/home.html?ClearContent=05 Jan 2026 18:54:16:337", "text": "\n                                                Home\n                                            ", "visible": false, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 2, "href": "../New_admin/frmNewCustomer.aspx?ClearContent=05 Jan 2026 18:54:16:337", "normalized_href": "https://subs.quickdrycleaning.com/a668/App/New_admin/frmNewCustomer.aspx?ClearContent=05 Jan 2026 18:54:16:337", "text": "\n                                                Add New\n                                            ", "visible": false, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 3, "href": "../Reports/CustomerWalletSummary.aspx?ClearContent=05 Jan 2026 18:54:16:337", "normalized_href": "https://subs.quickdrycleaning.com/a668/App/Reports/CustomerWalletSummary.aspx?ClearContent=05 Jan 2026 18:54:16:337", "text": "\n                                                Customer Advances\n                                            ", "visible": false, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 4, "href": "#", "normalized_href": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2018:54:15", "text": "", "visible": true, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 5, "href": "../Bookings_New/frmbooking.aspx?option=Edit?ClearContent=05 Jan 2026 18:54:16:337", "normalized_href": "https://subs.quickdrycleaning.com/a668/App/Bookings_New/frmbooking.aspx?option=Edit?ClearContent=05 Jan 2026 18:54:16:337", "text": "\n                                                Edit Order\n                                            ", "visible": false, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 6, "href": "#", "normalized_href": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2018:54:15", "text": "", "visible": true, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 7, "href": "../Reports/InvoiceNoPrint.aspx?ClearContent=05 Jan 2026 18:54:16:337", "normalized_href": "https://subs.quickdrycleaning.com/a668/App/Reports/InvoiceNoPrint.aspx?ClearContent=05 Jan 2026 18:54:16:337", "text": "\n                                                Print QR Tags\n                                            ", "visible": false, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 8, "href": "../Bookings_New/SentToWorkshopChallan.aspx?ClearContent=05 Jan 2026 18:54:16:337", "normalized_href": "https://subs.quickdrycleaning.com/a668/App/Bookings_New/SentToWorkshopChallan.aspx?ClearContent=05 Jan 2026 18:54:16:337", "text": "\n                                                Send to Workshop\n                                            ", "visible": false, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 9, "href": "../Bookings_New/ReceiveFromWorkShop.aspx?ClearContent=05 Jan 2026 18:54:16:337", "normalized_href": "https://subs.quickdrycleaning.com/a668/App/Bookings_New/ReceiveFromWorkShop.aspx?ClearContent=05 Jan 2026 18:54:16:337", "text": "\n                                                Receive from Workshop\n                                            ", "visible": false, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 10, "href": "../Bookings_New/Pendingforfinishing.aspx?ClearContent=05 Jan 2026 18:54:16:337", "normalized_href": "https://subs.quickdrycleaning.com/a668/App/Bookings_New/Pendingforfinishing.aspx?ClearContent=05 Jan 2026 18:54:16:337", "text": "\n                                                Pending for Finishing\n                                            ", "visible": false, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 11, "href": "../Bookings_New/PackingStickers.aspx?ClearContent=05 Jan 2026 18:54:16:337", "normalized_href": "https://subs.quickdrycleaning.com/a668/App/Bookings_New/PackingStickers.aspx?ClearContent=05 Jan 2026 18:54:16:337", "text": "\n                                                Packing Stickers\n                                            ", "visible": false, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 12, "href": "../Reports/ChallanReport.aspx?ClearContent=05 Jan 2026 18:54:16:337", "normalized_href": "https://subs.quickdrycleaning.com/a668/App/Reports/ChallanReport.aspx?ClearContent=05 Jan 2026 18:54:16:337", "text": "\n                                                Workshop Note\n                                            ", "visible": false, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 13, "href": "#", "normalized_href": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2018:54:15", "text": "", "visible": true, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 14, "href": "../New_Booking/frmMultiplepayment.aspx?ClearContent=05 Jan 2026 18:54:16:337", "normalized_href": "https://subs.quickdrycleaning.com/a668/App/New_Booking/frmMultiplepayment.aspx?ClearContent=05 Jan 2026 18:54:16:337", "text": "Multiple Payment And Delivery", "visible": true, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 15, "href": "../New_Admin/frmBookingHistory.aspx?ClearContent=05 Jan 2026 18:54:16:337", "normalized_href": "https://subs.quickdrycleaning.com/a668/App/New_Admin/frmBookingHistory.aspx?ClearContent=05 Jan 2026 18:54:16:337", "text": "Order Log", "visible": true, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 16, "href": "../New_Admin/frmHomePickUpScheduler.aspx?ClearContent=05 Jan 2026 18:54:16:337", "normalized_href": "https://subs.quickdrycleaning.com/a668/App/New_Admin/frmHomePickUpScheduler.aspx?ClearContent=05 Jan 2026 18:54:16:337", "text": "Home Pick Up Scheduler", "visible": true, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 17, "href": "../New_Admin/frmDropOffScheduler.aspx?ClearContent=05 Jan 2026 18:54:16:337", "normalized_href": "https://subs.quickdrycleaning.com/a668/App/New_Admin/frmDropOffScheduler.aspx?ClearContent=05 Jan 2026 18:54:16:337", "text": "Home Drop Off Scheduler", "visible": true, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 18, "href": "../New_Admin/DriverPickupDropoff.aspx?ClearContent=05 Jan 2026 18:54:16:337", "normalized_href": "https://subs.quickdrycleaning.com/a668/App/New_Admin/DriverPickupDropoff.aspx?ClearContent=05 Jan 2026 18:54:16:337", "text": "Assign To Driver", "visible": true, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 19, "href": "#", "normalized_href": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2018:54:15", "text": "", "visible": true, "matches_sales": false, "matches_text": false, "matches_label": false}], "ts": "2026-01-05T13:24:17.281279+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A668", "phase": "sales", "status": "ok", "message": "Sales navigation attempt", "navigation_method": "orders_left_nav", "navigation_path": "orders_left_nav", "attempt": "initial", "retry_status": "initial", "success": false, "final_url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2018:54:15", "target_url": "https://subs.quickdrycleaning.com/a668/App/Reports/NEWSalesAndDeliveryReport", "nav_selector": "#achrOrderReport", "sales_nav_selector": null, "reason": "sales_nav_not_found", "url_transitions": [{"label": "start", "url": "https://subs.quickdrycleaning.com/a668/App/home?EventClick=True"}, {"label": "after_orders_nav", "url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2018:54:15"}, {"label": "orders_ready", "url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2018:54:15"}], "ts": "2026-01-05T13:24:17.282051+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A668", "phase": "sales", "status": "ok", "message": "Falling back to direct Sales URL because Sales navigation link was unavailable", "target_url": "https://subs.quickdrycleaning.com/a668/App/Reports/NEWSalesAndDeliveryReport", "last_final_url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2018:54:15", "last_reason": "sales_nav_not_found", "attempts": [{"navigation_method": "orders_left_nav", "navigation_path": "orders_left_nav", "attempt": "initial", "retry_status": "initial", "success": false, "final_url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2018:54:15", "target_url": "https://subs.quickdrycleaning.com/a668/App/Reports/NEWSalesAndDeliveryReport", "nav_selector": "#achrOrderReport", "sales_nav_selector": null, "reason": "sales_nav_not_found", "url_transitions": [{"label": "start", "url": "https://subs.quickdrycleaning.com/a668/App/home?EventClick=True"}, {"label": "after_orders_nav", "url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2018:54:15"}, {"label": "orders_ready", "url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2018:54:15"}]}], "ts": "2026-01-05T13:24:17.282150+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A668", "phase": "sales", "status": "ok", "message": "Starting Sales navigation via direct URL fallback", "navigation_method": "direct_fallback", "navigation_path": "direct_url_fallback", "target_url": "https://subs.quickdrycleaning.com/a668/App/Reports/NEWSalesAndDeliveryReport", "ts": "2026-01-05T13:24:17.282305+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A668", "phase": "sales", "status": "ok", "message": "Waiting for Sales URL match after direct navigation", "navigation_method": "direct_fallback", "navigation_path": "direct_url_fallback", "target_pattern": "/A668/App/Reports/NEWSalesAndDeliveryReport", "target_url": "https://subs.quickdrycleaning.com/a668/App/Reports/NEWSalesAndDeliveryReport", "ts": "2026-01-05T13:24:17.425187+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A668", "phase": "sales", "status": "warn", "message": "Sales destination validation failed after direct navigation", "navigation_method": "direct_fallback", "navigation_path": "direct_url_fallback", "final_url": "https://subs.quickdrycleaning.com/Login", "target_url": "https://subs.quickdrycleaning.com/a668/App/Reports/NEWSalesAndDeliveryReport", "contains_store_code": false, "contains_sales_path": false, "is_login_url": true, "ts": "2026-01-05T13:25:47.438798+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A668", "phase": "sales", "status": "ok", "message": "Sales navigation attempt", "navigation_method": "direct_fallback", "navigation_path": "direct_url_fallback", "attempt": "fallback", "retry_status": "fallback", "success": false, "final_url": "https://subs.quickdrycleaning.com/Login", "target_url": "https://subs.quickdrycleaning.com/a668/App/Reports/NEWSalesAndDeliveryReport", "nav_selector": "#achrOrderReport", "sales_nav_selector": null, "reason": "login_redirect", "url_transitions": [{"label": "start", "url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2018:54:15"}, {"label": "after_direct_goto", "url": "https://subs.quickdrycleaning.com/Login"}, {"label": "after_direct_wait", "url": "https://subs.quickdrycleaning.com/Login"}], "ts": "2026-01-05T13:25:47.438946+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A668", "phase": "sales", "status": "warn", "message": "Sales & Delivery report navigation failed after retry", "final_url": "https://subs.quickdrycleaning.com/Login", "target_url": "https://subs.quickdrycleaning.com/a668/App/Reports/NEWSalesAndDeliveryReport", "reason": "login_redirect", "attempts": [{"navigation_method": "orders_left_nav", "navigation_path": "orders_left_nav", "attempt": "initial", "retry_status": "initial", "success": false, "final_url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2018:54:15", "target_url": "https://subs.quickdrycleaning.com/a668/App/Reports/NEWSalesAndDeliveryReport", "nav_selector": "#achrOrderReport", "sales_nav_selector": null, "reason": "sales_nav_not_found", "url_transitions": [{"label": "start", "url": "https://subs.quickdrycleaning.com/a668/App/home?EventClick=True"}, {"label": "after_orders_nav", "url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2018:54:15"}, {"label": "orders_ready", "url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2018:54:15"}]}, {"navigation_method": "direct_fallback", "navigation_path": "direct_url_fallback", "attempt": "fallback", "retry_status": "fallback", "success": false, "final_url": "https://subs.quickdrycleaning.com/Login", "target_url": "https://subs.quickdrycleaning.com/a668/App/Reports/NEWSalesAndDeliveryReport", "nav_selector": "#achrOrderReport", "sales_nav_selector": null, "reason": "login_redirect", "url_transitions": [{"label": "start", "url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2018:54:15"}, {"label": "after_direct_goto", "url": "https://subs.quickdrycleaning.com/Login"}, {"label": "after_direct_wait", "url": "https://subs.quickdrycleaning.com/Login"}]}], "navigation_method": "direct_fallback", "navigation_path": "direct_url_fallback", "retry_status": "fallback", "ts": "2026-01-05T13:25:47.439033+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A668", "phase": "sales", "status": "warn", "message": "Sales navigation outcome", "navigation_method": "direct_fallback", "navigation_path": "direct_url_fallback", "retry_status": "fallback", "final_url": "https://subs.quickdrycleaning.com/Login", "reason": "login_redirect", "attempts": [{"navigation_method": "orders_left_nav", "navigation_path": "orders_left_nav", "attempt": "initial", "retry_status": "initial", "success": false, "final_url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2018:54:15", "target_url": "https://subs.quickdrycleaning.com/a668/App/Reports/NEWSalesAndDeliveryReport", "nav_selector": "#achrOrderReport", "sales_nav_selector": null, "reason": "sales_nav_not_found", "url_transitions": [{"label": "start", "url": "https://subs.quickdrycleaning.com/a668/App/home?EventClick=True"}, {"label": "after_orders_nav", "url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2018:54:15"}, {"label": "orders_ready", "url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2018:54:15"}]}, {"navigation_method": "direct_fallback", "navigation_path": "direct_url_fallback", "attempt": "fallback", "retry_status": "fallback", "success": false, "final_url": "https://subs.quickdrycleaning.com/Login", "target_url": "https://subs.quickdrycleaning.com/a668/App/Reports/NEWSalesAndDeliveryReport", "nav_selector": "#achrOrderReport", "sales_nav_selector": null, "reason": "login_redirect", "url_transitions": [{"label": "start", "url": "https://subs.quickdrycleaning.com/a668/App/Reports/OrderReport?ClearContent=1-0-2026%2018:54:15"}, {"label": "after_direct_goto", "url": "https://subs.quickdrycleaning.com/Login"}, {"label": "after_direct_wait", "url": "https://subs.quickdrycleaning.com/Login"}]}], "ts": "2026-01-05T13:25:47.439328+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A668", "phase": "sales", "status": "warn", "message": "Navigation to Sales & Delivery report did not complete", "final_url": "https://subs.quickdrycleaning.com/Login", "ts": "2026-01-05T13:25:47.439552+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A668", "phase": "store", "status": "ok", "message": "Completed TD orders store discovery", "session_reused": true, "ts": "2026-01-05T13:25:47.439673+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A817", "phase": "store", "status": "ok", "message": "Starting TD orders store discovery", "run_env": "dev", "from_date": "2025-12-06", "to_date": "2026-01-05", "ts": "2026-01-05T13:25:47.481112+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A817", "phase": "session", "status": "ok", "message": "Storage state found; probing session validity", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A817_storage_state.json", "ts": "2026-01-05T13:25:47.926437+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A817", "phase": "session", "status": "warn", "message": "Probed session with existing storage state", "response_status": 200, "final_url": "https://subs.quickdrycleaning.com/Login", "contains_store_code": false, "verification_seen": false, "login_detected": true, "nav_visible": false, "home_card_visible": false, "state_valid": false, "invalid_reason": "login_form_visible", "probe_error": null, "probe_target": "https://subs.quickdrycleaning.com/a817/App/home?EventClick=True", "contains_store_path": false, "ts": "2026-01-05T13:25:53.622338+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A817", "phase": "session", "status": "ok", "message": "Storage state probe invalid; performing login", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A817_storage_state.json", "probe_reason": "login_form_visible", "probe_valid": false, "verification_seen": false, "nav_visible": false, "home_card_visible": false, "re_login_performed": true, "ts": "2026-01-05T13:25:53.622532+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A817", "phase": "login", "status": "ok", "message": "Completed login attempt", "final_url": "https://subs.quickdrycleaning.com/a817/App/home?EventClick=True", "contains_store_code": true, "post_login_wait_completed": "url_contains_store_code", "post_login_wait_error": null, "submit_error": null, "selectors": {"username": "#txtUserId", "password": "#txtPassword", "store_code": "#txtBranchPin", "submit": "#btnLogin"}, "ts": "2026-01-05T13:25:54.632155+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A817", "phase": "session", "status": "ok", "message": "Login completed; session ready", "final_url": "https://subs.quickdrycleaning.com/a817/App/home?EventClick=True", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A817_storage_state.json", "probe_reason": "login_form_visible", "probe_valid": false, "login_performed": true, "re_login_performed": true, "ts": "2026-01-05T13:25:54.632291+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A817", "phase": "session", "status": "ok", "message": "Session ready after OTP/verification wait", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A817_storage_state.json", "final_url": "https://subs.quickdrycleaning.com/a817/App/home?EventClick=True", "verification_seen": false, "login_performed": true, "ts": "2026-01-05T13:25:54.632384+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A817", "phase": "login", "status": "ok", "message": "Home page ready after login/verification", "final_url": "https://subs.quickdrycleaning.com/a817/App/home?EventClick=True", "nav_selector": "#achrOrderReport", "nav_visible": true, "home_card_visible": false, "ts": "2026-01-05T13:26:00.522504+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A817", "phase": "home", "status": "ok", "message": "Navigation controls snapshot", "links": [{"index": 0, "text": "Home    \n(Ctrl+H)", "href": "home.html?ClearContent=1-0-2026 18:56:0", "visible": true}, {"index": 1, "text": "Dashboard", "href": "Bookings_New/frmDashBoard.aspx?ClearContent=1-0-2026 18:56:0", "visible": true}, {"index": 2, "text": "Customer", "href": "New_Admin/frmNewCustomer.aspx?ClearContent=1-0-2026 18:56:0", "visible": true}, {"index": 3, "text": "Drop (F1)", "href": "", "visible": false}, {"index": 4, "text": "Reports", "href": "Reports/OrderReport.aspx?ClearContent=1-0-2026 18:56:0", "visible": true}], "ts": "2026-01-05T13:26:00.634214+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A817", "phase": "session", "status": "ok", "message": "Stored refreshed session state after home detection", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A817_storage_state.json", "verification_seen": false, "ts": "2026-01-05T13:26:00.643342+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A817", "phase": "session", "status": "ok", "message": "Persisted storage state for A817 after home detection", "storage_state": "/Users/wagidsheikh/Documents/programming/python/simplify_downloader/app/crm_downloader/profiles/A817_storage_state.json", "session_reused": true, "refreshed": true, "ts": "2026-01-05T13:26:00.643425+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A817", "phase": "orders", "status": "ok", "message": "Skipping Orders iframe flow because Orders segment was disabled by flag", "ts": "2026-01-05T13:26:00.643478+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A817", "phase": "sales", "status": "ok", "message": "Navigating to Orders container before Sales", "navigation_method": "orders_reports_tile", "navigation_path": "orders_left_nav", "retry_status": "initial", "nav_selector": "#achrOrderReport", "ts": "2026-01-05T13:26:00.643808+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A817", "phase": "orders", "status": "ok", "message": "Navigated to Orders container via Reports entry", "final_url": "https://subs.quickdrycleaning.com/a817/App/Reports/OrderReport?ClearContent=1-0-2026%2018:56:0", "nav_selector": "#achrOrderReport", "ts": "2026-01-05T13:26:01.517157+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A817", "phase": "sales", "status": "ok", "message": "Sales left-nav candidates snapshot", "samples": [{"index": 0, "href": "#", "normalized_href": "https://subs.quickdrycleaning.com/a817/App/Reports/OrderReport?ClearContent=1-0-2026%2018:56:0", "text": "", "visible": true, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 1, "href": "../home.html?ClearContent=05 Jan 2026 18:56:01:093", "normalized_href": "https://subs.quickdrycleaning.com/a817/App/home.html?ClearContent=05 Jan 2026 18:56:01:093", "text": "\n                                                Home\n                                            ", "visible": false, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 2, "href": "../New_admin/frmNewCustomer.aspx?ClearContent=05 Jan 2026 18:56:01:093", "normalized_href": "https://subs.quickdrycleaning.com/a817/App/New_admin/frmNewCustomer.aspx?ClearContent=05 Jan 2026 18:56:01:093", "text": "\n                                                Add New\n                                            ", "visible": false, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 3, "href": "../Reports/CustomerWalletSummary.aspx?ClearContent=05 Jan 2026 18:56:01:093", "normalized_href": "https://subs.quickdrycleaning.com/a817/App/Reports/CustomerWalletSummary.aspx?ClearContent=05 Jan 2026 18:56:01:093", "text": "\n                                                Customer Advances\n                                            ", "visible": false, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 4, "href": "#", "normalized_href": "https://subs.quickdrycleaning.com/a817/App/Reports/OrderReport?ClearContent=1-0-2026%2018:56:0", "text": "", "visible": true, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 5, "href": "../Bookings_New/frmbooking.aspx?option=Edit?ClearContent=05 Jan 2026 18:56:01:093", "normalized_href": "https://subs.quickdrycleaning.com/a817/App/Bookings_New/frmbooking.aspx?option=Edit?ClearContent=05 Jan 2026 18:56:01:093", "text": "\n                                                Edit Order\n                                            ", "visible": false, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 6, "href": "#", "normalized_href": "https://subs.quickdrycleaning.com/a817/App/Reports/OrderReport?ClearContent=1-0-2026%2018:56:0", "text": "", "visible": true, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 7, "href": "../Reports/InvoiceNoPrint.aspx?ClearContent=05 Jan 2026 18:56:01:093", "normalized_href": "https://subs.quickdrycleaning.com/a817/App/Reports/InvoiceNoPrint.aspx?ClearContent=05 Jan 2026 18:56:01:093", "text": "\n                                                Print QR Tags\n                                            ", "visible": false, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 8, "href": "../Bookings_New/SentToWorkshopChallan.aspx?ClearContent=05 Jan 2026 18:56:01:093", "normalized_href": "https://subs.quickdrycleaning.com/a817/App/Bookings_New/SentToWorkshopChallan.aspx?ClearContent=05 Jan 2026 18:56:01:093", "text": "\n                                                Send to Workshop\n                                            ", "visible": false, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 9, "href": "../Bookings_New/ReceiveFromWorkShop.aspx?ClearContent=05 Jan 2026 18:56:01:093", "normalized_href": "https://subs.quickdrycleaning.com/a817/App/Bookings_New/ReceiveFromWorkShop.aspx?ClearContent=05 Jan 2026 18:56:01:093", "text": "\n                                                Receive from Workshop\n                                            ", "visible": false, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 10, "href": "../Bookings_New/Pendingforfinishing.aspx?ClearContent=05 Jan 2026 18:56:01:093", "normalized_href": "https://subs.quickdrycleaning.com/a817/App/Bookings_New/Pendingforfinishing.aspx?ClearContent=05 Jan 2026 18:56:01:093", "text": "\n                                                Pending for Finishing\n                                            ", "visible": false, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 11, "href": "../Bookings_New/PackingStickers.aspx?ClearContent=05 Jan 2026 18:56:01:093", "normalized_href": "https://subs.quickdrycleaning.com/a817/App/Bookings_New/PackingStickers.aspx?ClearContent=05 Jan 2026 18:56:01:093", "text": "\n                                                Packing Stickers\n                                            ", "visible": false, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 12, "href": "../Reports/ChallanReport.aspx?ClearContent=05 Jan 2026 18:56:01:093", "normalized_href": "https://subs.quickdrycleaning.com/a817/App/Reports/ChallanReport.aspx?ClearContent=05 Jan 2026 18:56:01:093", "text": "\n                                                Workshop Note\n                                            ", "visible": false, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 13, "href": "#", "normalized_href": "https://subs.quickdrycleaning.com/a817/App/Reports/OrderReport?ClearContent=1-0-2026%2018:56:0", "text": "", "visible": true, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 14, "href": "../New_Booking/frmMultiplepayment.aspx?ClearContent=05 Jan 2026 18:56:01:093", "normalized_href": "https://subs.quickdrycleaning.com/a817/App/New_Booking/frmMultiplepayment.aspx?ClearContent=05 Jan 2026 18:56:01:093", "text": "\n                                                Multiple Payment And Delivery\n                                            ", "visible": false, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 15, "href": "../New_Admin/frmBookingHistory.aspx?ClearContent=05 Jan 2026 18:56:01:093", "normalized_href": "https://subs.quickdrycleaning.com/a817/App/New_Admin/frmBookingHistory.aspx?ClearContent=05 Jan 2026 18:56:01:093", "text": "\n                                                Order Log\n                                            ", "visible": false, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 16, "href": "../New_Admin/frmHomePickUpScheduler.aspx?ClearContent=05 Jan 2026 18:56:01:093", "normalized_href": "https://subs.quickdrycleaning.com/a817/App/New_Admin/frmHomePickUpScheduler.aspx?ClearContent=05 Jan 2026 18:56:01:093", "text": "\n                                                Home Pick Up Scheduler\n                                            ", "visible": false, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 17, "href": "../New_Admin/frmDropOffScheduler.aspx?ClearContent=05 Jan 2026 18:56:01:093", "normalized_href": "https://subs.quickdrycleaning.com/a817/App/New_Admin/frmDropOffScheduler.aspx?ClearContent=05 Jan 2026 18:56:01:093", "text": "\n                                                Home Drop Off Scheduler\n                                            ", "visible": false, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 18, "href": "../New_Admin/DriverPickupDropoff.aspx?ClearContent=05 Jan 2026 18:56:01:093", "normalized_href": "https://subs.quickdrycleaning.com/a817/App/New_Admin/DriverPickupDropoff.aspx?ClearContent=05 Jan 2026 18:56:01:093", "text": "\n                                                Assign To Driver\n                                            ", "visible": false, "matches_sales": false, "matches_text": false, "matches_label": false}, {"index": 19, "href": "#", "normalized_href": "https://subs.quickdrycleaning.com/a817/App/Reports/OrderReport?ClearContent=1-0-2026%2018:56:0", "text": "", "visible": true, "matches_sales": false, "matches_text": false, "matches_label": false}], "ts": "2026-01-05T13:26:01.960339+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A817", "phase": "sales", "status": "ok", "message": "Sales navigation attempt", "navigation_method": "orders_left_nav", "navigation_path": "orders_left_nav", "attempt": "initial", "retry_status": "initial", "success": false, "final_url": "https://subs.quickdrycleaning.com/a817/App/Reports/OrderReport?ClearContent=1-0-2026%2018:56:0", "target_url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport", "nav_selector": "#achrOrderReport", "sales_nav_selector": null, "reason": "sales_nav_not_found", "url_transitions": [{"label": "start", "url": "https://subs.quickdrycleaning.com/a817/App/home?EventClick=True"}, {"label": "after_orders_nav", "url": "https://subs.quickdrycleaning.com/a817/App/Reports/OrderReport?ClearContent=1-0-2026%2018:56:0"}, {"label": "orders_ready", "url": "https://subs.quickdrycleaning.com/a817/App/Reports/OrderReport?ClearContent=1-0-2026%2018:56:0"}], "ts": "2026-01-05T13:26:01.961219+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A817", "phase": "sales", "status": "ok", "message": "Falling back to direct Sales URL because Sales navigation link was unavailable", "target_url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport", "last_final_url": "https://subs.quickdrycleaning.com/a817/App/Reports/OrderReport?ClearContent=1-0-2026%2018:56:0", "last_reason": "sales_nav_not_found", "attempts": [{"navigation_method": "orders_left_nav", "navigation_path": "orders_left_nav", "attempt": "initial", "retry_status": "initial", "success": false, "final_url": "https://subs.quickdrycleaning.com/a817/App/Reports/OrderReport?ClearContent=1-0-2026%2018:56:0", "target_url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport", "nav_selector": "#achrOrderReport", "sales_nav_selector": null, "reason": "sales_nav_not_found", "url_transitions": [{"label": "start", "url": "https://subs.quickdrycleaning.com/a817/App/home?EventClick=True"}, {"label": "after_orders_nav", "url": "https://subs.quickdrycleaning.com/a817/App/Reports/OrderReport?ClearContent=1-0-2026%2018:56:0"}, {"label": "orders_ready", "url": "https://subs.quickdrycleaning.com/a817/App/Reports/OrderReport?ClearContent=1-0-2026%2018:56:0"}]}], "ts": "2026-01-05T13:26:01.961297+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A817", "phase": "sales", "status": "ok", "message": "Starting Sales navigation via direct URL fallback", "navigation_method": "direct_fallback", "navigation_path": "direct_url_fallback", "target_url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport", "ts": "2026-01-05T13:26:01.961508+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A817", "phase": "sales", "status": "ok", "message": "Waiting for Sales URL match after direct navigation", "navigation_method": "direct_fallback", "navigation_path": "direct_url_fallback", "target_pattern": "/A817/App/Reports/NEWSalesAndDeliveryReport", "target_url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport", "ts": "2026-01-05T13:26:02.099524+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A817", "phase": "sales", "status": "warn", "message": "Sales destination validation failed after direct navigation", "navigation_method": "direct_fallback", "navigation_path": "direct_url_fallback", "final_url": "https://subs.quickdrycleaning.com/Login", "target_url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport", "contains_store_code": false, "contains_sales_path": false, "is_login_url": true, "ts": "2026-01-05T13:27:32.119856+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A817", "phase": "sales", "status": "ok", "message": "Sales navigation attempt", "navigation_method": "direct_fallback", "navigation_path": "direct_url_fallback", "attempt": "fallback", "retry_status": "fallback", "success": false, "final_url": "https://subs.quickdrycleaning.com/Login", "target_url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport", "nav_selector": "#achrOrderReport", "sales_nav_selector": null, "reason": "login_redirect", "url_transitions": [{"label": "start", "url": "https://subs.quickdrycleaning.com/a817/App/Reports/OrderReport?ClearContent=1-0-2026%2018:56:0"}, {"label": "after_direct_goto", "url": "https://subs.quickdrycleaning.com/Login"}, {"label": "after_direct_wait", "url": "https://subs.quickdrycleaning.com/Login"}], "ts": "2026-01-05T13:27:32.120884+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A817", "phase": "sales", "status": "warn", "message": "Sales & Delivery report navigation failed after retry", "final_url": "https://subs.quickdrycleaning.com/Login", "target_url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport", "reason": "login_redirect", "attempts": [{"navigation_method": "orders_left_nav", "navigation_path": "orders_left_nav", "attempt": "initial", "retry_status": "initial", "success": false, "final_url": "https://subs.quickdrycleaning.com/a817/App/Reports/OrderReport?ClearContent=1-0-2026%2018:56:0", "target_url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport", "nav_selector": "#achrOrderReport", "sales_nav_selector": null, "reason": "sales_nav_not_found", "url_transitions": [{"label": "start", "url": "https://subs.quickdrycleaning.com/a817/App/home?EventClick=True"}, {"label": "after_orders_nav", "url": "https://subs.quickdrycleaning.com/a817/App/Reports/OrderReport?ClearContent=1-0-2026%2018:56:0"}, {"label": "orders_ready", "url": "https://subs.quickdrycleaning.com/a817/App/Reports/OrderReport?ClearContent=1-0-2026%2018:56:0"}]}, {"navigation_method": "direct_fallback", "navigation_path": "direct_url_fallback", "attempt": "fallback", "retry_status": "fallback", "success": false, "final_url": "https://subs.quickdrycleaning.com/Login", "target_url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport", "nav_selector": "#achrOrderReport", "sales_nav_selector": null, "reason": "login_redirect", "url_transitions": [{"label": "start", "url": "https://subs.quickdrycleaning.com/a817/App/Reports/OrderReport?ClearContent=1-0-2026%2018:56:0"}, {"label": "after_direct_goto", "url": "https://subs.quickdrycleaning.com/Login"}, {"label": "after_direct_wait", "url": "https://subs.quickdrycleaning.com/Login"}]}], "navigation_method": "direct_fallback", "navigation_path": "direct_url_fallback", "retry_status": "fallback", "ts": "2026-01-05T13:27:32.121038+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A817", "phase": "sales", "status": "warn", "message": "Sales navigation outcome", "navigation_method": "direct_fallback", "navigation_path": "direct_url_fallback", "retry_status": "fallback", "final_url": "https://subs.quickdrycleaning.com/Login", "reason": "login_redirect", "attempts": [{"navigation_method": "orders_left_nav", "navigation_path": "orders_left_nav", "attempt": "initial", "retry_status": "initial", "success": false, "final_url": "https://subs.quickdrycleaning.com/a817/App/Reports/OrderReport?ClearContent=1-0-2026%2018:56:0", "target_url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport", "nav_selector": "#achrOrderReport", "sales_nav_selector": null, "reason": "sales_nav_not_found", "url_transitions": [{"label": "start", "url": "https://subs.quickdrycleaning.com/a817/App/home?EventClick=True"}, {"label": "after_orders_nav", "url": "https://subs.quickdrycleaning.com/a817/App/Reports/OrderReport?ClearContent=1-0-2026%2018:56:0"}, {"label": "orders_ready", "url": "https://subs.quickdrycleaning.com/a817/App/Reports/OrderReport?ClearContent=1-0-2026%2018:56:0"}]}, {"navigation_method": "direct_fallback", "navigation_path": "direct_url_fallback", "attempt": "fallback", "retry_status": "fallback", "success": false, "final_url": "https://subs.quickdrycleaning.com/Login", "target_url": "https://subs.quickdrycleaning.com/a817/App/Reports/NEWSalesAndDeliveryReport", "nav_selector": "#achrOrderReport", "sales_nav_selector": null, "reason": "login_redirect", "url_transitions": [{"label": "start", "url": "https://subs.quickdrycleaning.com/a817/App/Reports/OrderReport?ClearContent=1-0-2026%2018:56:0"}, {"label": "after_direct_goto", "url": "https://subs.quickdrycleaning.com/Login"}, {"label": "after_direct_wait", "url": "https://subs.quickdrycleaning.com/Login"}]}], "ts": "2026-01-05T13:27:32.121373+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A817", "phase": "sales", "status": "warn", "message": "Navigation to Sales & Delivery report did not complete", "final_url": "https://subs.quickdrycleaning.com/Login", "ts": "2026-01-05T13:27:32.121627+00:00"}
{"run_id": "20260105_132405818869", "store_code": "A817", "phase": "store", "status": "ok", "message": "Completed TD orders store discovery", "session_reused": true, "ts": "2026-01-05T13:27:32.121733+00:00"}
{"run_id": "20260105_132405818869", "phase": "notifications", "status": "ok", "message": "TD orders sync discovery flow complete; notifying", "run_env": "dev", "ts": "2026-01-05T13:27:32.500503+00:00"}
{"run_id": "20260105_132405818869", "phase": "run_summary", "status": "ok", "message": "Run summary inserted", "overall_status": "warning", "ts": "2026-01-05T13:27:32.575746+00:00"}
