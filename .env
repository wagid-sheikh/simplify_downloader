# =============================================================================
# Simplify Downloader – Local Development Environment
# Copy from .env.example and customize for your machine.
# This file should NEVER be committed with real secrets.
# =============================================================================

# --- Runtime context (local dev) ---------------------------------------------
RUN_ENV="dev"                 # use "production" on server
ENVIRONMENT="dev"             # keep in sync with RUN_ENV
PIPELINE_TIMEZONE="Asia/Kolkata"

# --- Simplify credentials (single global login) ------------------------------
# TD_GLOBAL_USERNAME is both the CRM login and the first store_code.
TD_GLOBAL_USERNAME="A668"
TD_GLOBAL_PASSWORD="Wagid@321"   # replace with real password
TD_STORAGE_STATE_FILENAME="storage_state.json"

TD_BASE_URL="https://simplifytumbledry.in"
TD_HOME_URL="https://simplifytumbledry.in/home"
TD_LOGIN_URL="https://simplifytumbledry.in/home/login"
TMS_BASE="https://tms.simplifytumbledry.in"
TD_STORE_DASHBOARD_PATH="/mis/partner_dashboard?store_code={store_code}"

# --- Store selection ---------------------------------------------------------
# Comma-separated list of store codes handled by the dashboard downloader.
# First code should match TD_GLOBAL_USERNAME.
STORES_LIST="A668,A817,A526"

# Stores included in PDF/report generation.
REPORT_STORES_LIST="A668,A817"

# --- Database & migrations ---------------------------------------------------
# AsyncPG DSN for ingestion and reporting.
DATABASE_URL="postgresql+asyncpg://tsv_crm:TsvCrm1122_W@localhost:5432/tsv_crm_db"

# Location of Alembic configuration.
ALEMBIC_CONFIG="alembic.ini"

# Batch size for ingestion upserts (defaults to 3000 if unset).
INGEST_BATCH_SIZE="3000"

# --- Output & logging --------------------------------------------------------
# Directory where generated PDFs / reports are written.
REPORTS_ROOT="reports"

# Structured JSON logs for pipeline runs (optional).
JSON_LOG_FILE="logs/simplify_downloader.jsonl"

# --- Notification SMTP configuration ----------------------------------------
# “From” address used in outbound report emails.
REPORT_EMAIL_FROM="shaw@theshawventures.com"

# SMTP connection details (Gmail app password recommended).
REPORT_EMAIL_SMTP_HOST="smtp.gmail.com"
REPORT_EMAIL_SMTP_PORT="587"
REPORT_EMAIL_SMTP_USERNAME="wagid.sheikh@gmail.com"
REPORT_EMAIL_SMTP_PASSWORD="euejzayrzdwirsak"   # use app-specific password
REPORT_EMAIL_USE_TLS="true"

# NOTE:
# Report recipients (TO/CC) and subject template are now read from the database,
# not from environment variables.

# --- PDF renderer ------------------------------------------------------------
# local_chrome uses your installed Chrome; bundled_chromium would use a packaged one.
PDF_RENDER_BACKEND="local_chrome"
PDF_RENDER_HEADLESS="false"   # set "true" on servers / headless environments

# Path to Chrome executable (only used when PDF_RENDER_BACKEND=local_chrome).
PDF_RENDER_CHROME_EXECUTABLE="/Applications/Google Chrome.app/Contents/MacOS/Google Chrome"
