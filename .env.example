# =============================================================================
# Simplify Downloader canonical environment variables
# =============================================================================
# Copy this file to `.env` (never commit secrets) and replace placeholder values
# with real credentials before running the pipelines.
# =============================================================================

# --- Timezone & scheduling ----------------------------------------------------
# All pipelines resolve date periods in this timezone. Asia/Kolkata keeps parity
# with the production dashboards.
PIPELINE_TIMEZONE="Asia/Kolkata"

# --- Database (required for ingestion, reporting, notifications) --------------
DATABASE_URL="postgresql+asyncpg://user:password@localhost:5432/simplify"
ALEMBIC_CONFIG="alembic.ini"

# --- Global CRM login ---------------------------------------------------------
TD_GLOBAL_USERNAME=""
TD_GLOBAL_PASSWORD=""

# --- Store metadata & storage state ------------------------------------------
TD_UN3668_STORE_CODE="A668"
TD_UN3668_STORAGE_STATE_FILENAME="storage_state_UN3668.json"

TD_KN3817_STORE_CODE="A817"
TD_KN3817_STORAGE_STATE_FILENAME="storage_state_KN3817.json"

# Shared Playwright storage state fallback (one file per environment)
TD_STORAGE_STATE_FILENAME="storage_state.json"

# --- Pipeline store selection -------------------------------------------------
# Daily ingestion CLI: prefer the --stores_list flag; these env vars are only
# used when the flag is omitted. Do not set both names to different values.
stores_list="A668,A817"
STORES_LIST=""

# Reporting / PDF generation store list (required for PDF/notification flows)
REPORT_STORES_LIST="A668,A817"

# --- File system paths --------------------------------------------------------
# Directory where generated PDFs (daily/weekly/monthly) are written.
REPORTS_ROOT="reports"
# Structured log duplication (optional).
JSON_LOG_FILE="logs/simplify_downloader.jsonl"

# --- Optional ingest tuning ---------------------------------------------------
INGEST_BATCH_SIZE="3000"

# --- PDF renderer -------------------------------------------------------------
PDF_RENDER_BACKEND="local_chrome"
PDF_RENDER_HEADLESS="true"
PDF_RENDER_CHROME_EXECUTABLE="/usr/bin/google-chrome"

# --- Notification SMTP configuration -----------------------------------------
REPORT_EMAIL_FROM="reports@example.com"
REPORT_EMAIL_SMTP_HOST="smtp.example.com"
REPORT_EMAIL_SMTP_PORT="587"
REPORT_EMAIL_SMTP_USERNAME=""
REPORT_EMAIL_SMTP_PASSWORD=""
REPORT_EMAIL_USE_TLS="true"

# --- Base URLs (rarely changed) -----------------------------------------------
TD_BASE_URL="https://simplifytumbledry.in"
TD_HOME_URL="https://simplifytumbledry.in/home"
TD_LOGIN_URL="https://simplifytumbledry.in/home/login"
TMS_BASE="https://tms.simplifytumbledry.in"
TD_STORE_DASHBOARD_PATH="/mis/partner_dashboard?store_code={store_code}"

# --- Legacy / deprecated values ----------------------------------------------
# These only apply to the removed direct-email helpers. Leave blank in new
# environments; they remain here solely for backward compatibility tests.
REPORT_EMAIL_TO=""
REPORT_EMAIL_CC=""
REPORT_EMAIL_SUBJECT_TEMPLATE="[Store Reports] {{report_date}}"
